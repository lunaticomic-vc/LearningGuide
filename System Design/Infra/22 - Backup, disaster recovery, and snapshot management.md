# 22 - Backup, disaster recovery, and snapshot management

## 1. Activate Prior Knowledge

- Какви рискове крие загубата на данни в една AI система или софтуерен проект?
- Какви методи за съхранение и възстановяване на данни сте използвали или чували досега?
- Можете ли да си представите сценарий, в който една организация трябва бързо да възстанови работата си след сериозен инцидент?

## 2. Overview

Backup, disaster recovery и snapshot management са ключови елементи за осигуряване на надеждност и устойчивост на информационните системи, включително AI решения и софтуерни платформи. Те гарантират, че данните и услугите могат да бъдат възстановени след инциденти като хардуерни повреди, човешки грешки, кибератаки или природни бедствия.

Backup се отнася до създаването на копия на данни, които могат да бъдат използвани за възстановяване при загуба. Disaster recovery (DR) е по-широка стратегия, която включва не само възстановяване на данни, но и на цялостната инфраструктура и услуги. Snapshot management е техника за бързо създаване на моментни снимки на системи или данни, което позволява бързо връщане към предишно състояние.

Тези практики са особено важни в контекста на AI системи, където големи обеми от данни и модели трябва да бъдат защитени, за да се гарантира непрекъсната работа и минимални загуби при инциденти.

## 3. Key Concepts

- **Backup** – Създаване на резервно копие на данни, което може да се използва за възстановяване при загуба. Представете си го като сейф за вашите файлове.
- **Disaster Recovery (DR)** – Комплексен план и процеси за възстановяване на цялата система след сериозен инцидент. Това е като аварийна изходна стратегия за бизнеса.
- **Snapshot** – Моментна снимка на състоянието на система или данни в определен момент. Мислете за това като за функция "undo" на цяла система.
- **Recovery Point Objective (RPO)** – Максималното количество данни, което може да бъде загубено между два бекъпа (например, ако бекъпите са на всеки час, RPO е 1 час).
- **Recovery Time Objective (RTO)** – Максималното време, за което системата трябва да бъде възстановена след инцидент.
- **Incremental Backup** – Бекъп, който копира само променените данни от последния бекъп, спестявайки време и място.
- **Full Backup** – Пълно копие на всички данни.
- **Differential Backup** – Копира всички промени от последния пълен бекъп.

## 4. Step-by-step Learning Path

1. **Разберете нуждата от бекъп и DR**
   - Фокус: Защо са важни бекъпите и плановете за възстановяване.
   - Практическа задача: Опишете сценарий, в който загубата на данни би имала сериозни последствия.
   - Въпроси: Какво е основната цел на бекъпа? Какво включва един DR план?

2. **Изучете различните видове бекъп**
   - Фокус: Разлика между пълен, инкрементален и диференциален бекъп.
   - Практическа задача: Направете малък инкрементален бекъп на папка с файлове.
   - Въпроси: Какви са предимствата на инкременталния бекъп? Кога бихте избрали пълен бекъп?

3. **Разберете snapshot management**
   - Фокус: Какво представлява snapshot и кога се използва.
   - Практическа задача: Създайте snapshot на виртуална машина или база данни.
   - Въпроси: Как snapshot се различава от традиционния бекъп? Какви са ограниченията на snapshot?

4. **Планирайте DR стратегия**
   - Фокус: Основни компоненти на DR план.
   - Практическа задача: Направете кратък DR план за малък проект.
   - Въпроси: Какво е RTO и RPO? Защо са важни тези показатели?

5. **Тествайте възстановяване**
   - Фокус: Проверка на процеса по възстановяване.
   - Практическа задача: Възстановете данни от бекъп или snapshot.
   - Въпроси: Какви проблеми могат да възникнат при възстановяване? Как да се уверите, че бекъпите са валидни?

## 5. Examples

### Пример 1: Инкрементален бекъп със `rsync`
```bash
rsync -av --link-dest=/backup/prev /data /backup/new
```
Този команден ред създава инкрементален бекъп на директорията `/data`, като използва предишния бекъп за сравнение.

### Пример 2: Snapshot на виртуална машина (VMware)
Създаване на snapshot през VMware vSphere:
1. Изберете VM.
2. Кликнете "Take Snapshot".
3. Дайте име и описание.
4. Потвърдете.

### Пример 3: Disaster Recovery план за AI система
- Бекъп на модели и тренировъчни данни всеки ден.
- Седмичен snapshot на продукционната база данни.
- DR план: В случай на срив, възстановяване на последния snapshot и зареждане на последния бекъп на моделите.

## 6. Common Pitfalls

- **Липса на редовно тестване на възстановяването** – Бекъпите може да са повредени или непълни; винаги тествайте процеса на възстановяване.
- **Съхранение на бекъпите на същото място като оригиналните данни** – При физически инцидент и бекъпите могат да се загубят; използвайте offsite или cloud бекъп.
- **Пренебрегване на RTO и RPO** – Без ясни цели може да се окаже, че възстановяването е твърде бавно или данните са прекалено стари.
- **Недостатъчно чести бекъпи** – Рядките бекъпи увеличават риска от загуба на важни данни.
- **Пропускане на бекъп на конфигурационни файлове и метаданни** – Само данните не са достатъчни за пълно възстановяване на системата.

## 7. Short Retrieval Quiz

1. Каква е разликата между пълен и инкрементален бекъп?
2. Какво представлява snapshot и кога е най-полезен?
3. Какво означават RTO и RPO?
4. Защо е важно бекъпите да се съхраняват на различно физическо място?
5. Какви са основните стъпки в един disaster recovery план?
6. Какви рискове крие липсата на редовно тестване на възстановяването?
7. Как snapshot management може да помогне при обновяване на софтуер?

## 8. Quick Recap

- Backup, disaster recovery и snapshot management са основни за сигурността и устойчивостта на системите.
- Backup е копие на данни, което се използва за възстановяване при загуба.
- Disaster recovery включва цялостен план за възстановяване на услуги и инфраструктура.
- Snapshot е моментна снимка на система, позволяваща бързо връщане назад.
- RTO и RPO определят целите за възстановяване на данни и услуги.
- Редовното тестване и съхранение на бекъпите на различни места са критични.
- Комбинирането на различни подходи осигурява най-висока надеждност.

## 9. Spaced Review Plan

| Review Time | Prompt                                              |
|-------------|-----------------------------------------------------|
| 1 day       | Обяснете разликата между бекъп и snapshot.          |
| 3 days      | Опишете основните компоненти на един DR план.       |
| 1 week      | Дайте пример за RTO и RPO във ваш проект.           |
| 1 month     | Избройте често срещани грешки при бекъп и DR.       |