# Confidence_intervals_and_hypothesis_testing

## 1. Activate Prior Knowledge

- Какво представлява несигурността в измерванията и прогнозите, и защо е важно да я оценяваме в AI системи?
- Как бихте използвали статистически методи, за да проверите дали подобрение в софтуерен модел е значимо или случайно?
- Какво означава да направим извод за популация, базирайки се на ограничен набор от данни?

## 2. Overview

Confidence intervals (интервали на доверие) и hypothesis testing (тестове на хипотези) са фундаментални статистически инструменти, които ни позволяват да правим обосновани изводи за популации въз основа на извадкови данни. В контекста на AI и софтуерното инженерство те се използват за оценка на надеждността на модели, сравнение на алгоритми и валидиране на експерименти.

Интервалите на доверие предоставят диапазон от стойности, в който с определена вероятност се намира истинският параметър на популацията. Това е по-информативно от проста точкова оценка, тъй като отчита вариабилността на данните.

Тестовете на хипотези позволяват да се формулира и провери конкретно предположение (хипотеза) за параметър на популацията, като например дали нов модел е по-добър от стария. Те ни помагат да вземаме решения, базирани на статистически доказателства, а не на интуиция.

## 3. Key Concepts

- **Population (Популация)** – Цялата група от обекти или събития, за които искаме да направим изводи. Например всички потребители на дадена платформа.
- **Sample (Извадка)** – Подмножество от популацията, използвано за анализ. Както проба от вода, която изследваме, за да разберем качеството на цялото езеро.
- **Parameter (Параметър)** – Числова характеристика на популацията, например средна стойност или дисперсия.
- **Statistic (Статистика)** – Числова характеристика, изчислена от извадката, която служи за оценка на параметъра.
- **Confidence Interval (Интервал на доверие)** – Диапазон от стойности, който с определена вероятност съдържа истинския параметър. Мислете за него като за „зона на сигурност“ около оценката.
- **Significance Level (Ниво на значимост, α)** – Максимално допустимата вероятност да направим грешка от първи род (фалшиво положителен резултат).
- **Null Hypothesis (Нулева хипотеза, H₀)** – Основното предположение, което искаме да проверим, обикновено че няма ефект или разлика.
- **Alternative Hypothesis (Алтернативна хипотеза, H₁)** – Противоположното на нулевата, например че има ефект или разлика.
- **p-value** – Вероятността да наблюдаваме получените данни или по-екстремни, ако нулевата хипотеза е вярна. Колкото по-малко е p-стойността, толкова по-силни са доказателствата срещу H₀.
- **Type I Error (Грешка от първи род)** – Отхвърляне на вярна нулева хипотеза (фалшиво положителен резултат).
- **Type II Error (Грешка от втори род)** – Неправилно приемане на фалшива нулева хипотеза (фалшиво отрицателен резултат).

## 4. Step-by-step Learning Path

1. **Разберете основите на популации и извадки**  
   - Фокус: Какво е извадка и защо е нужна.  
   - Задача: Съберете малка извадка от данни (например време за отговор на API) и изчислете средната стойност.  
   - Въпроси: Какво представлява извадката? Защо не можем да използваме цялата популация?

2. **Изучете как се изчисляват и интерпретират интервали на доверие**  
   - Фокус: Формула за интервал на доверие за средна стойност и влиянието на размера на извадката.  
   - Задача: Изчислете 95% интервал на доверие за средното време за отговор от предишната задача.  
   - Въпроси: Какво означава 95% доверителен интервал? Как размерът на извадката влияе на ширината на интервала?

3. **Запознайте се с формулировката на хипотези и нива на значимост**  
   - Фокус: Разлика между нулева и алтернативна хипотеза, избор на α.  
   - Задача: Формулирайте хипотеза дали нов алгоритъм за компресия е по-бърз от стария.  
   - Въпроси: Какво представлява нулевата хипотеза? Какво е нивото на значимост?

4. **Практикувайте провеждането на t-тест или z-тест**  
   - Фокус: Изчисляване на p-стойност и вземане на решение.  
   - Задача: Използвайте Python или друг език, за да проведете t-тест между две извадки.  
   - Въпроси: Какво означава малка p-стойност? Какво решение взимаме при p < α?

5. **Интерпретирайте резултатите и вземайте решения в реални проекти**  
   - Фокус: Практическа употреба на резултатите в AI модели и софтуерни експерименти.  
   - Задача: Анализирайте резултатите от A/B тест и решете дали да пуснете новата версия.  
   - Въпроси: Какво означава статистическа значимост в контекста на продукта? Какво е практическото значение на резултатите?

## 5. Examples

### Пример 1: Интервал на доверие за средна стойност

Имаме извадка от време за отговор на API: [120, 130, 125, 140, 135] ms. Изчисляваме 95% интервал на доверие.

```python
import numpy as np
from scipy import stats

data = np.array([120, 130, 125, 140, 135])
mean = np.mean(data)
sem = stats.sem(data)  # стандартна грешка на средната стойност
confidence = 0.95
h = sem * stats.t.ppf((1 + confidence) / 2., len(data)-1)

print(f"Средна стойност: {mean} ms")
print(f"95% интервал на доверие: [{mean - h:.2f}, {mean + h:.2f}] ms")
```

### Пример 2: t-тест за сравнение на два алгоритъма

Два алгоритъма имат следните времена за изпълнение (в секунди):

- Алгоритъм A: [2.3, 2.5, 2.1, 2.4, 2.2]  
- Алгоритъм B: [2.6, 2.7, 2.8, 2.5, 2.9]

Провеждаме двустранен t-тест, за да проверим дали има статистически значима разлика.

```python
from scipy.stats import ttest_ind

a = np.array([2.3, 2.5, 2.1, 2.4, 2.2])
b = np.array([2.6, 2.7, 2.8, 2.5, 2.9])

t_stat, p_value = ttest_ind(a, b)
print(f"t-статистика: {t_stat:.3f}, p-стойност: {p_value:.3f}")

if p_value < 0.05:
    print("Отхвърляме нулевата хипотеза: има значима разлика.")
else:
    print("Не можем да отхвърлим нулевата хипотеза: няма значима разлика.")
```

## 6. Common Pitfalls

- **Интерпретиране на p-стойността като вероятност, че хипотезата е вярна** – p-стойността измерва вероятността на данните при условие, че H₀ е вярна, а не обратното.
- **Игнориране на размера на извадката** – малки извадки водят до по-широки интервали и по-ниска статистическа мощност.
- **Избор на неподходящ тест** – например използване на z-тест при малка извадка или когато не е известна дисперсията.
- **Множествени сравнения без корекция** – провеждането на много тестове увеличава риска от грешки от първи род.
- **Прекалено доверие в статистическата значимост без практическа оценка** – резултатът може да е статистически значим, но с минимално практическо значение.

## 7. Short Retrieval Quiz

1. Какво представлява интервалът на доверие?  
2. Каква е ролята на нулевата хипотеза в теста на хипотези?  
3. Какво означава p-стойност по-малка от 0.05?  
4. Каква е разликата между грешка от първи и втори род?  
5. Защо е важно да изберем подходящ размер на извадката?  
6. Какво е нивото на значимост (α)?  
7. Кога използваме t-тест вместо z-тест?

## 8. Quick Recap

- Интервалите на доверие предоставят диапазон, в който с определена вероятност се намира истинският параметър.  
- Тестовете на хипотези позволяват формално проверяване на предположения за популация.  
- Нулевата хипотеза обикновено предполага липса на ефект или разлика.  
- p-стойността измерва съвместимостта на данните с нулевата хипотеза.  
- Грешките от първи и втори род са основни рискове при вземане на решения.  
- Изборът на подходящ статистически тест и размер на извадката е критичен за валидността на изводите.  
- Практическата значимост трябва да се разглежда заедно със статистическата.

## 9. Spaced Review Plan

| Време след учене | Промпт за преглед                                     |
|-------------------|-------------------------------------------------------|
| 1 ден             | Обяснете с прости думи какво е интервал на доверие.  |
| 3 дни             | Формулирайте нулевата и алтернативната хипотеза.     |
| 1 седмица         | Проведете t-тест на примерни данни и интерпретирайте резултата. |
| 1 месец           | Дискутирайте как бихте използвали тестове на хипотези в AI проект. |