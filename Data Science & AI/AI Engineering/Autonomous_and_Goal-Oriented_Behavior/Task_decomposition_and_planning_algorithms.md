# Task_decomposition_and_planning_algorithms

## 1. Activate Prior Knowledge
- Какво разбирате под „задача“ в контекста на изкуствения интелект и софтуерното инженерство?
- Как бихте разделили сложна задача на по-малки подзадачи, за да я решите по-лесно?
- Какви алгоритми или методи познавате, които помагат за планиране на последователност от действия?

## 2. Overview
Task decomposition and planning algorithms са ключови компоненти в системите за изкуствен интелект и автоматизация, които позволяват решаването на сложни задачи чрез разбиването им на по-малки, управляеми подзадачи. Това улеснява както разбирането, така и изпълнението на задачи, които иначе биха били твърде сложни за директно решаване.

В по-широк контекст, тези алгоритми се използват в роботика, автоматизирано планиране, управление на процеси и софтуерно инженерство, където е необходимо да се дефинира последователност от действия, които водят до постигане на цел. Те са основата на интелигентните агенти, които могат да планират, адаптират се и изпълняват задачи в динамична среда.

Значението им се крие в оптимизацията на ресурсите, подобряване на ефективността и надеждността на системите. Без правилна декомпозиция и планиране, системите могат да се сблъскат с експлозия на възможни състояния или да не успеят да намерят решение в разумно време.

## 3. Key Concepts
- **Task Decomposition** – Процесът на разделяне на сложна задача на по-малки, по-лесно управляеми подзадачи. Може да се сравни с разделянето на голям проект на отделни етапи или задачи.
- **Planning Algorithm** – Метод, който намира последователност от действия, водещи от начално състояние до целево състояние. Аналогия: навигатор, който планира маршрут от точка А до точка Б.
- **Hierarchical Task Network (HTN)** – Модел за планиране, който използва йерархична декомпозиция на задачи, където високо ниво задачи се разграждат на по-ниски нива.
- **State Space** – Множество от всички възможни състояния, в които системата може да се намира. Представете си карта на всички възможни позиции и условия.
- **Search Algorithm** – Алгоритъм, който търси решение в пространството на състоянията, например A*, BFS или DFS.
- **Plan Optimality** – Критерий, който оценява колко ефективен или кратък е намереният план.
- **Preconditions and Effects** – Условия, които трябва да са изпълнени преди действие (preconditions) и промените, които действие предизвиква (effects).

## 4. Step-by-step Learning Path
1. **Фокус:** Разбиране на основите на декомпозицията на задачи  
   **Задача:** Вземете една сложна задача (например „организиране на конференция“) и я разделете на поне 5 подзадачи.  
   **Въпроси:** Какви критерии използвахте за разделяне? Какво прави една подзадача „управляема“?

2. **Фокус:** Запознаване с основните планиращи алгоритми (BFS, DFS, A*)  
   **Задача:** Имплементирайте прост BFS или DFS за намиране на път в граф.  
   **Въпроси:** Как алгоритъмът избира следващото състояние? Какво е предимството на A* спрямо BFS?

3. **Фокус:** Изучаване на HTN планиране  
   **Задача:** Опишете йерархична декомпозиция на задача „готвене на вечеря“ с поне 3 нива.  
   **Въпроси:** Как HTN улеснява планирането спрямо планиране без йерархия?

4. **Фокус:** Практическо планиране с условия и ефекти  
   **Задача:** Създайте примерен план с действия, всяко със свои preconditions и effects, и симулирайте изпълнението му.  
   **Въпроси:** Как се проверява дали дадено действие може да бъде изпълнено? Какво се случва ако preconditions не са изпълнени?

5. **Фокус:** Оптимизация и оценка на планове  
   **Задача:** Сравнете два плана за една и съща задача по брой действия и време за изпълнение.  
   **Въпроси:** Какво прави един план по-добър от друг? Какви компромиси могат да се направят?

## 5. Examples
### Пример 1: Декомпозиция на задача за почистване на стая
```plaintext
Задача: Почисти стаята
Подзадачи:
  1. Събери боклука
  2. Избърши праха
  3. Премети пода
  4. Изплакни и изсуши пода
```

### Пример 2: Прост план с A* за намиране на път в мрежа
```python
import heapq

def a_star(start, goal, neighbors, heuristic):
    open_set = []
    heapq.heappush(open_set, (0 + heuristic(start, goal), 0, start, []))
    closed_set = set()

    while open_set:
        est_total, cost, current, path = heapq.heappop(open_set)
        if current == goal:
            return path + [current]
        if current in closed_set:
            continue
        closed_set.add(current)
        for neighbor in neighbors(current):
            if neighbor not in closed_set:
                heapq.heappush(open_set, (cost + 1 + heuristic(neighbor, goal), cost + 1, neighbor, path + [current]))
    return None
```

### Пример 3: HTN за готвене на вечеря
```plaintext
Вечеря
 ├── Приготвяне на основно ястие
 │    ├── Нарязване на съставки
 │    └── Готвене
 └── Приготвяне на салата
      ├── Измиване на зеленчуци
      └── Смесване
```

## 6. Common Pitfalls
- **Прекалено груба или твърде фина декомпозиция** – Ако задачите са твърде големи, планирането става сложно; ако са твърде малки, системата губи ефективност. Балансът е ключов.
- **Игнориране на preconditions** – Опит за изпълнение на действия без проверка на условията води до неуспех на плана.
- **Пренебрегване на ефектите на действията** – Неотчитането на промените в състоянието след действие може да доведе до грешки и цикли.
- **Липса на оптимизация** – Намиране на план, който работи, но е неоптимален, може да доведе до излишни ресурси и време.
- **Неадекватно моделиране на състояния** – Ако състоянията не са добре дефинирани, алгоритмите не могат да намерят валидни решения.

## 7. Short Retrieval Quiz
1. Какво представлява task decomposition?
2. Каква е ролята на preconditions в планирането?
3. Какво е HTN и как се различава от планиране без йерархия?
4. Кой алгоритъм използва евристична функция за търсене?
5. Защо е важно да се дефинират ефектите на действията?
6. Какво може да се случи при твърде фина декомпозиция на задача?
7. Какво означава планът да е оптимален?

## 8. Quick Recap
- Task decomposition разделя сложни задачи на управляеми подзадачи.
- Planning algorithms намират последователност от действия за достигане на цел.
- HTN използва йерархична структура за по-ефективно планиране.
- Preconditions и effects са ключови за валидността на действията.
- Оптималността на плана влияе върху ефективността на системата.
- Балансът в декомпозицията е критичен за успешното планиране.
- Използването на подходящи алгоритми (напр. A*) подобрява качеството на решенията.

## 9. Spaced Review Plan

| Време след учене | Промпт за преглед                                         |
|------------------|-----------------------------------------------------------|
| 1 ден            | Обяснете с прости думи какво е task decomposition.        |
| 3 дни            | Избройте основните компоненти на HTN планирането.         |
| 1 седмица        | Опишете разликите между BFS, DFS и A* в контекста на планиране. |
| 1 месец          | Прегледайте пример за планиране с preconditions и effects и обяснете защо са важни. |