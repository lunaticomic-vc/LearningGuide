# Measuring_runtime_empirically

## 1. Activate Prior Knowledge
- Какво разбирате под „време за изпълнение“ (runtime) на софтуерен алгоритъм или система?
- Защо е важно да измерваме времето за изпълнение в контекста на AI модели или софтуерни приложения?
- Как бихте предвидили влиянието на различни входни данни върху времето за изпълнение?

## 2. Overview
Измерването на времето за изпълнение емпирично означава да наблюдаваме и записваме колко време отнема дадена програма или алгоритъм да завърши при реални условия. Това е ключов процес в оптимизацията на софтуер, особено при AI системи, където ефективността може да повлияе на потребителското изживяване и ресурсната консумация.

Времето за изпълнение се използва за оценка на производителността, сравнение на различни алгоритми и за откриване на тесни места (bottlenecks) в системата. В по-широк контекст, то е част от профилирането и тестването на софтуер, които гарантират, че системата работи според изискванията за скорост и мащабируемост.

Емпиричното измерване се различава от теоретичния анализ, тъй като отчита реални фактори като хардуер, операционна система, паралелизъм и други системни влияния, които не винаги са предвидими с формули.

## 3. Key Concepts
- **Runtime (време за изпълнение)** – времето, което алгоритъмът или програмата изразходва от стартиране до завършване. Представете си го като времето, което ви е нужно да прочетете книга от първата до последната страница.
- **Empirical Measurement (емпирично измерване)** – събиране на данни чрез наблюдение и експерименти, вместо изчисления или теоретични модели. Аналогично на това да измерите колко време ви отнема да изминете определено разстояние, а не да го изчислявате по карта.
- **Profiling (профилиране)** – процес на анализиране на изпълнението на програмата, за да се идентифицират части, които отнемат най-много време или ресурси.
- **Benchmarking (бенчмаркинг)** – сравняване на производителността на различни системи или алгоритми чрез стандартизирани тестове.
- **Overhead (натоварване)** – допълнителното време или ресурси, необходими за измерване или управление на изпълнението, които могат да повлияят на резултатите.

## 4. Step-by-step Learning Path
1. **Фокус:** Разберете как да използвате вградените инструменти за измерване на време в програмния език, който използвате.  
   **Задача:** Напишете проста програма, която измерва времето за изпълнение на цикъл с 1 милион итерации.  
   **Въпроси:** Какво е времето за изпълнение на вашия цикъл? Какво влияние има броят на итерациите?

2. **Фокус:** Запознайте се с профилирането и как да идентифицирате „тесни места“.  
   **Задача:** Използвайте профайлър (например `cProfile` в Python) върху програма с няколко функции и открийте коя функция отнема най-много време.  
   **Въпроси:** Коя функция е най-бавна? Как бихте оптимизирали тази част?

3. **Фокус:** Изследвайте влиянието на различни входни данни върху времето за изпълнение.  
   **Задача:** Измерете времето за изпълнение на алгоритъм за сортиране с различни размери на входните масиви.  
   **Въпроси:** Как се променя времето при нарастване на входа? Какво това ви казва за сложността на алгоритъма?

4. **Фокус:** Научете как да минимизирате overhead при измерване.  
   **Задача:** Сравнете времето за изпълнение с и без използване на инструменти за профилиране.  
   **Въпроси:** Как профилирането влияе на времето за изпълнение? Как да отчетете този ефект?

5. **Фокус:** Практикувайте бенчмаркинг на AI модели или софтуерни компоненти.  
   **Задача:** Измерете времето за изпълнение на различни версии на AI модел и анализирайте резултатите.  
   **Въпроси:** Коя версия е по-бърза и защо? Какво може да подобрите?

## 5. Examples

### Пример 1: Измерване на време в Python
```python
import time

start = time.time()
for i in range(10**6):
    pass
end = time.time()

print(f"Време за изпълнение: {end - start} секунди")
```

### Пример 2: Профилиране с cProfile
```python
import cProfile

def slow_function():
    total = 0
    for i in range(10**6):
        total += i
    return total

cProfile.run('slow_function()')
```

### Пример 3: Влияние на входни данни върху сортиране
```python
import time
import random

def measure_sort_time(n):
    data = [random.randint(0, 1000) for _ in range(n)]
    start = time.time()
    sorted(data)
    end = time.time()
    return end - start

print(measure_sort_time(1000))
print(measure_sort_time(10000))
print(measure_sort_time(100000))
```

## 6. Common Pitfalls
- **Игнориране на overhead:** Измерването на време може да добави допълнително натоварване, което да изкриви резултатите. Винаги правете контролни измервания.
- **Недостатъчно повторения:** Еднократните измервания могат да са неточни поради случайни системни фактори. Използвайте средни стойности от няколко изпълнения.
- **Неправилен избор на входни данни:** Използването на само малки или еднородни входни данни не отразява реалната производителност.
- **Измерване на неподходящи части:** Понякога се измерва цялата програма, вместо конкретни функции или блокове, което затруднява оптимизацията.
- **Пренебрегване на системни фактори:** Фонови процеси, кеширане и хардуерни особености могат да влияят на времето за изпълнение.

## 7. Short Retrieval Quiz
1. Какво означава „емпирично измерване“ на време за изпълнение?
2. Защо е важно да повтаряме измерванията няколко пъти?
3. Какво представлява профилирането и как помага при оптимизация?
4. Какво е overhead и как влияе на измерванията?
5. Как бихте проверили влиянието на размера на входните данни върху времето за изпълнение?
6. Кога бенчмаркингът е полезен?
7. Какви системни фактори могат да повлияят на резултатите от измерванията?

## 8. Quick Recap
- Емпиричното измерване на runtime е ключово за реална оценка на производителността.
- Използвайте вградени инструменти и профайлъри за прецизни измервания.
- Винаги правете повторни измервания и използвайте средни стойности.
- Влиянието на входните данни и системните условия трябва да се взема под внимание.
- Overhead от измерванията трябва да се контролира и отчита.
- Бенчмаркингът помага за сравнение и избор на най-добри решения.
- Избягвайте типични грешки като непълни данни и неправилно измерване.

## 9. Spaced Review Plan

| Време след учене | Преговорна задача                                   |
|------------------|----------------------------------------------------|
| 1 ден            | Прегледайте основните термини и напишете кратък код за измерване на време. |
| 3 дни            | Извършете профилиране на малка програма и анализирайте резултатите.       |
| 1 седмица        | Сравнете времето за изпълнение на два различни алгоритъма с различни входни данни. |
| 1 месец          | Направете бенчмарк на AI модел и напишете кратък доклад за оптимизациите.  |