# Experimental_design_and_AB_testing

## 1. Activate Prior Knowledge

- Какво представлява експерименталният дизайн и как може да се приложи при разработката на софтуерни системи или AI модели?
- Какви са предимствата и ограниченията на A/B тестовете в сравнение с други методи за оценка на ефективността на промени в системите?
- Как бихте дефинирали контролната и експерименталната група в контекста на софтуерно инженерство?

## 2. Overview

Експерименталният дизайн е систематичен подход за планиране, провеждане и анализ на експерименти с цел да се изследва причинно-следствена връзка между променливи. В контекста на софтуерното инженерство и AI системите, той позволява да се тества ефектът от нови функции, алгоритми или интерфейсни промени върху потребителското поведение или производителността.

A/B тестовете са най-често използваният вид експериментален дизайн в индустрията, при който две версии на продукт или функция се сравняват директно чрез рандомизирано разпределение на потребителите. Това осигурява емпирични доказателства за това коя версия постига по-добри резултати по избрани метрики.

Този подход е критичен за вземане на решения, базирани на данни, като минимизира риска от пристрастия и грешни изводи. В по-широката система на разработка и внедряване, експерименталният дизайн и A/B тестовете служат като мост между хипотезите на екипа и реалното поведение на потребителите.

## 3. Key Concepts

- **Randomization** – Процесът на случайно разпределяне на участниците в различни групи, за да се избегнат систематични пристрастия. Представете си хвърляне на монета за всяко решение.
- **Control Group (Контролна група)** – Групата, която не получава новата промяна и служи като база за сравнение.
- **Treatment Group (Експериментална група)** – Групата, която получава новата версия или интервенция.
- **Hypothesis (Хипотеза)** – Предположение, което се тества чрез експеримента, например „Новият интерфейс увеличава задържането на потребителите“.
- **Statistical Significance (Статистическа значимост)** – Мярка за това дали наблюдаваната разлика между групите е вероятно резултат от експеримента, а не на случайност.
- **Type I и Type II Errors** – Грешки при вземането на решения: Type I е фалшиво положително (приемаме ефект, който няма), Type II е фалшиво отрицателно (пропускаме реален ефект).
- **Power of the Test (Мощност на теста)** – Вероятността да открием ефект, ако той съществува.
- **Confounding Variables (Смущаващи променливи)** – Външни фактори, които могат да повлияят на резултатите и да изкривят изводите.

## 4. Step-by-step Learning Path

1. **Разберете основите на експерименталния дизайн**
   - Фокус: Прочетете за целите и принципите на експерименталния дизайн.
   - Задача: Опишете с прости думи как бихте тествали нова функция в приложение.
   - Въпроси: Какво е ролята на контролната група? Защо е важна рандомизацията?

2. **Изучете A/B тестовете и тяхната структура**
   - Фокус: Научете как се създават и управляват A/B тестове.
   - Задача: Създайте план за A/B тест на уеб страница с две версии на бутон.
   - Въпроси: Как се определя коя версия е по-добра? Какво е статистическа значимост?

3. **Практикувайте анализ на резултати**
   - Фокус: Разгледайте как се интерпретират данните от A/B тестове.
   - Задача: Анализирайте примерни резултати и решете дали да приемете новата версия.
   - Въпроси: Какво означава p-стойност? Какво е Type I грешка?

4. **Изучете разширени теми: многовариантни тестове и фактори, влияещи на резултатите**
   - Фокус: Разберете как да проектирате по-сложни експерименти.
   - Задача: Проектирайте експеримент с две независими променливи.
   - Въпроси: Какво е взаимодействие между фактори? Как да избегнем смущаващи променливи?

5. **Прилагайте експерименталния дизайн в AI системи**
   - Фокус: Разгледайте специфичните предизвикателства при A/B тестове в AI (например, drift, cold start).
   - Задача: Опишете как бихте тествали нов модел за препоръки.
   - Въпроси: Какви са рисковете при тестване на AI модели? Как да осигурим валидност на теста?

## 5. Examples

### Пример 1: A/B тест на уеб бутон

```python
# Симулиране на резултати от A/B тест
import numpy as np
from scipy import stats

# Контролна група - конверсии
control = np.random.binomial(1, 0.10, 1000)

# Експериментална група - конверсии
treatment = np.random.binomial(1, 0.12, 1000)

# Тест за значимост (z-тест)
stat, p_value = stats.ttest_ind(treatment, control)
print(f"P-value: {p_value:.4f}")
```

### Пример 2: Многовариантен тест с две версии на интерфейс и две версии на текст

- Група A1: Интерфейс 1 + Текст 1
- Група A2: Интерфейс 1 + Текст 2
- Група B1: Интерфейс 2 + Текст 1
- Група B2: Интерфейс 2 + Текст 2

Този дизайн позволява да се анализира както отделният ефект на интерфейса и текста, така и тяхното взаимодействие.

### Пример 3: Тестване на AI препоръчителна система

- Контролна група получава препоръки от стария модел.
- Експериментална група получава препоръки от новия модел.
- Метрики: CTR (Click-Through Rate), време на сесия, задържане.

## 6. Common Pitfalls

- **Неправилна рандомизация** – може да доведе до пристрастия и невалидни резултати. Винаги използвайте случайно разпределение.
- **Недостатъчен размер на извадката** – води до ниска мощност и невъзможност да се открие реален ефект.
- **Прекалено ранно спиране на теста** – може да доведе до фалшиви изводи, базирани на непълни данни.
- **Игнориране на смущаващи променливи** – външни фактори могат да изкривят резултатите.
- **Фокус само върху статистическата значимост, без практическа релевантност** – дори значим резултат може да е незначителен за бизнеса.
- **Неотчитане на multiple testing problem** при многократни сравнения.
- **Липса на контрол върху външни промени по време на теста** (например маркетингови кампании).

## 7. Short Retrieval Quiz

1. Каква е ролята на контролната група в A/B тест?
2. Какво означава статистическа значимост?
3. Какво представлява Type I грешка?
4. Защо е важно рандомизирането в експерименталния дизайн?
5. Какво е основната цел на многовариантните тестове?
6. Как бихте измерили успеха на нов AI модел в A/B тест?
7. Какви са рисковете от прекалено ранно спиране на теста?

## 8. Quick Recap

- Експерименталният дизайн позволява да се изследват причинно-следствени връзки чрез контролирани експерименти.
- A/B тестовете са широко използван метод за сравнение на две версии на продукт или функция.
- Рандомизацията и контролът на смущаващи променливи са ключови за валидността на резултатите.
- Статистическата значимост помага да се определи дали наблюдаваните ефекти са реални.
- Многовариантните тестове разширяват възможностите за анализ на няколко фактора едновременно.
- В AI системите експерименталният дизайн трябва да отчита специфични предизвикателства като drift и cold start.
- Избягвайте типични грешки като малки извадки, пристрастия и преждевременно спиране на теста.

## 9. Spaced Review Plan

| Време след учене | Прегледен въпрос/Задача                                      |
|-------------------|--------------------------------------------------------------|
| 1 ден             | Обяснете ролята на контролната и експерименталната група.    |
| 3 дни             | Опишете процеса на рандомизация и защо е важен.              |
| 1 седмица         | Създайте план за A/B тест на нова функция в софтуер.         |
| 1 месец           | Анализирайте примерни резултати и обсъдете възможни грешки.   |