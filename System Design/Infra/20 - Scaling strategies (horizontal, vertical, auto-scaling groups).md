# 20 - Scaling strategies (horizontal, vertical, auto-scaling groups)

## 1. Activate Prior Knowledge

- Какви са основните причини, поради които един софтуерен или AI проект може да се нуждае от скалиране?
- Кога сте се сблъсквали с проблеми, свързани с натоварване или производителност на системи?
- Как мислите, че различните видове скалиране могат да повлияят на разходите и надеждността на системата?

## 2. Overview

Скалирането е ключова стратегия за осигуряване на производителност, надеждност и ефективност на съвременните софтуерни и AI системи. То позволява на системите да се адаптират към променящото се натоварване, като увеличават или намаляват ресурсите си според нуждите. Това е особено важно при облачни среди и големи уеб приложения, където трафикът и изчислителните изисквания могат да варират драстично.

Съществуват два основни подхода към скалирането: хоризонтално (добавяне на повече машини) и вертикално (увеличаване на ресурсите на една машина). Освен това, автоматизираните групи за скалиране (auto-scaling groups) позволяват динамично управление на ресурсите без човешка намеса, което е критично за мащабируемостта на AI и облачните системи.

Изборът на подходяща стратегия за скалиране зависи от архитектурата на системата, бизнес изискванията и бюджета. Разбирането на тези стратегии помага на инженерите да изграждат по-устойчиви, ефективни и икономични решения.

## 3. Key Concepts

- **Horizontal Scaling (Хоризонтално скалиране)** – Добавяне на повече сървъри или инстанции към системата, подобно на разширяване на екип с нови членове за по-голям обем работа.
- **Vertical Scaling (Вертикално скалиране)** – Увеличаване на ресурсите (CPU, RAM) на една машина, като "ъпгрейд" на компютъра ви с по-мощни компоненти.
- **Auto-scaling Groups (Групи за автоматично скалиране)** – Механизми, които автоматично добавят или премахват ресурси според натоварването, като термостат, който регулира температурата според нуждите.
- **Load Balancer (Балансировач на натоварване)** – Компонент, който разпределя трафика между множество сървъри, за да се избегне претоварване.
- **Single Point of Failure (Една точка на отказ)** – Компонент, чийто отказ може да спре цялата система; хоризонталното скалиране намалява този риск.
- **Elasticity (Еластичност)** – Способността на системата да се адаптира към променящото се натоварване, като добавя или премахва ресурси в реално време.

## 4. Step-by-step Learning Path

1. **Разберете разликата между хоризонтално и вертикално скалиране**
   - Фокус: Основни дефиниции, предимства и недостатъци.
   - Практическа задача: Направете таблица с плюсове и минуси на двата подхода.
   - Въпроси: Какво е хоризонтално скалиране? Кога бихте избрали вертикално скалиране?

2. **Изучете auto-scaling групите**
   - Фокус: Как работят auto-scaling групите в облачни среди (напр. AWS, Azure).
   - Практическа задача: Конфигурирайте проста auto-scaling група в избрана облачна платформа.
   - Въпроси: Какви са основните параметри за настройка на auto-scaling група? Какви събития я активират?

3. **Интегрирайте балансировач на натоварване**
   - Фокус: Роля на load balancer при хоризонтално скалиране.
   - Практическа задача: Настройте load balancer между две уеб инстанции.
   - Въпроси: Как load balancer подобрява надеждността? Какво става при отказ на една инстанция?

4. **Оценете ефекта върху разходите и производителността**
   - Фокус: Как скалирането влияе на бюджета и latency.
   - Практическа задача: Изчислете разходите за хоризонтално и вертикално скалиране при определено натоварване.
   - Въпроси: Кога auto-scaling може да намали разходите? Какви са рисковете при прекомерно скалиране?

## 5. Examples

### Пример 1: Хоризонтално скалиране на уеб приложение

Вместо да увеличавате ресурсите на един сървър, добавяте още две инстанции и използвате load balancer:

```yaml
# AWS Auto Scaling Group (примерна CloudFormation конфигурация)
Resources:
  MyAutoScalingGroup:
    Type: AWS::AutoScaling::AutoScalingGroup
    Properties:
      MinSize: 2
      MaxSize: 5
      LaunchConfigurationName: !Ref MyLaunchConfig
      TargetGroupARNs:
        - !Ref MyTargetGroup
```

### Пример 2: Вертикално скалиране на база данни

Увеличавате RAM и CPU на съществуващата база данни, за да обработва повече заявки, без да добавяте нови инстанции.

### Пример 3: Auto-scaling за AI inference

AI модел за обработка на изображения автоматично стартира повече GPU инстанции при пикова натовареност и ги спира, когато трафикът намалее.

## 6. Common Pitfalls

- **Прекалено разчитане на вертикално скалиране** – Ограничено от хардуера и може да доведе до една точка на отказ.
- **Лоша конфигурация на auto-scaling** – Неправилно зададени threshold-и могат да доведат до прекомерни разходи или забавяне при реакция.
- **Пренебрегване на балансировача** – Без load balancer, хоризонталното скалиране не носи пълни ползи.
- **Недостатъчно тестване при натоварване** – Липса на симулации може да скрие проблеми при реален трафик.

## 7. Short Retrieval Quiz

1. Каква е основната разлика между хоризонтално и вертикално скалиране?
2. Какво е auto-scaling група и какви са нейните предимства?
3. Защо load balancer е важен при хоризонтално скалиране?
4. Какви са рисковете при прекомерно вертикално скалиране?
5. Как auto-scaling групите помагат за оптимизиране на разходите?
6. Какво означава "еластичност" в контекста на скалирането?
7. Кога бихте избрали хоризонтално пред вертикално скалиране?

## 8. Quick Recap

- Скалирането позволява на системите да се адаптират към натоварване и да останат ефективни.
- Хоризонталното скалиране добавя нови машини, вертикалното – увеличава ресурсите на съществуваща.
- Auto-scaling групите автоматизират процеса на добавяне/премахване на ресурси.
- Load balancer разпределя трафика и повишава надеждността.
- Еластичността е ключова за модерните облачни и AI системи.
- Неправилното скалиране може да увеличи разходите или да създаде точки на отказ.
- Изборът на стратегия зависи от архитектурата, бюджета и бизнес целите.

## 9. Spaced Review Plan

| Review Time | Prompt                                                      |
|-------------|------------------------------------------------------------|
| 1 day       | Обяснете разликата между хоризонтално и вертикално скалиране. |
| 3 days      | Опишете как работи auto-scaling група и дайте пример.      |
| 1 week      | Кои са основните предимства и недостатъци на всяка стратегия? |
| 1 month     | Как бихте избрали подходяща скалираща стратегия за нов проект? |
