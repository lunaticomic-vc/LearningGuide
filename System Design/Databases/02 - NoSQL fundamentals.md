# 02 - NoSQL fundamentals

## 1. Activate Prior Knowledge

- Какви са основните разлики между релационните бази данни (SQL) и нерелационните (NoSQL) системи?  
- Можете ли да си спомните ситуации, в които традиционните SQL бази данни не са били достатъчно ефективни или гъвкави?  
- Какви изисквания към съхранението и обработката на данни имат съвременните AI системи и мащабируеми уеб приложения?

---

## 2. Overview

NoSQL базите данни представляват алтернатива на класическите релационни бази данни, като предлагат по-голяма гъвкавост, мащабируемост и производителност при работа с големи обеми от разнообразни данни. Те са създадени, за да отговорят на нуждите на съвременните приложения, които често работят с неструктурирани или полу-структурирани данни, изискват бърз достъп и лесно хоризонтално разширяване.

Вместо да използват фиксирани схеми и SQL език, NoSQL системите позволяват динамични структури на данните и често използват по-прости или специализирани езици за заявки. Това ги прави особено подходящи за приложения в сферата на изкуствения интелект, IoT, големи данни и облачни услуги.

NoSQL не е една технология, а по-скоро група от подходи и инструменти, които се различават по начина на съхранение, индексиране и достъп до данни. Основните категории включват документо-ориентирани, key-value, графови и колоно-ориентирани бази данни.

Изборът на подходяща NoSQL система зависи от конкретните изисквания на приложението – например, нужда от мащабируемост, бързина на запис/четене, или сложни връзки между данните.

---

## 3. Key Concepts

- NoSQL – Съвкупност от бази данни, които не използват традиционния релационен модел. Представете си ги като различни видове шкафове за съхранение, всеки с уникална организация.
- Документо-ориентирани бази данни – Съхраняват данни като документи (напр. JSON), подобно на папки с файлове, където всеки файл може да има различна структура.
- Key-Value Store – Данните се съхраняват като двойки ключ-стойност, както в речник, където бързо намирате стойност по даден ключ.
- Графови бази данни – Представят данните като възли и връзки (граф), което е удобно за моделиране на социални мрежи или препоръчителни системи.
- Колоно-ориентирани бази данни – Организират данните по колони вместо по редове, което е ефективно при аналитични заявки върху големи масиви от данни.
- CAP теорема – Теоретичен принцип, според който една разпределена система не може едновременно да осигури консистентност, достъпност и устойчивост към разделяне на мрежата.
- Шардване (Sharding) – Разделяне на данните на части (шарди), които се съхраняват на различни сървъри за по-добра мащабируемост.

---

## 4. Step-by-step Learning Path

1. **Разберете основните видове NoSQL бази данни**  
   - Фокус: Разграничете документо-ориентирани, key-value, графови и колоно-ориентирани системи.  
   - Практическа задача: Направете таблица с примери за всяка категория (напр. MongoDB, Redis, Neo4j, Cassandra).  
   - Въпроси: Коя категория е най-подходяща за социална мрежа? Коя за кеширане?

2. **Инсталирайте и стартирайте проста NoSQL база данни**  
   - Фокус: Практикувайте с MongoDB или Redis.  
   - Практическа задача: Инсталирайте MongoDB локално и създайте база данни с няколко документа.  
   - Въпроси: Как се създава нов документ? Как се извлича по ключ?

3. **Изследвайте основните операции (CRUD)**  
   - Фокус: Научете как се създават, четат, обновяват и изтриват данни.  
   - Практическа задача: Използвайте CLI или драйвер за добавяне, редактиране и изтриване на записи.  
   - Въпроси: Как се различава структурата на заявките спрямо SQL?

4. **Разберете CAP теоремата и нейните последици**  
   - Фокус: Осмислете компромисите между консистентност, достъпност и устойчивост.  
   - Практическа задача: Намерете примери за реални системи, които избират различни комбинации от CAP.  
   - Въпроси: Какво се жертва при partition tolerance? Какво означава eventual consistency?

5. **Моделирайте примерна структура на данни за AI приложение**  
   - Фокус: Изберете подходящ NoSQL модел за съхранение на резултати от ML експерименти.  
   - Практическа задача: Създайте JSON схема за съхранение на метаданни за ML модели.  
   - Въпроси: Защо документо-ориентираната база е подходяща за тази задача?

---

## 5. Examples

### Пример 1: Създаване и извличане на документ в MongoDB

```javascript
// Вмъкване на нов документ
db.users.insertOne({
  name: "Ivan Petrov",
  email: "ivan@example.com",
  age: 29
});

// Извличане на всички потребители над 25 години
db.users.find({ age: { $gt: 25 } });
```

### Пример 2: Използване на Redis като key-value store

```shell
SET session:12345 "user_id:42"
GET session:12345
```

### Пример 3: Моделиране на връзки в графова база Neo4j

```cypher
CREATE (a:Person {name: 'Maria'})
CREATE (b:Person {name: 'Georgi'})
CREATE (a)-[:FRIEND]->(b)
```

---

## 6. Common Pitfalls

- **Избор на неподходящ тип NoSQL база** – Не всяка NoSQL система е подходяща за всяко приложение. Анализирайте нуждите си преди избор.
- **Липса на схеми и валидация** – Свободната структура може да доведе до хаотични данни. Използвайте валидация и документация.
- **Неправилно шардване** – Лошо проектирани shard ключове могат да доведат до неравномерно натоварване.
- **Подценяване на консистентността** – Eventual consistency не е подходяща за всички сценарии, особено при финансови транзакции.
- **Пренебрегване на индексирането** – Без индекси заявките могат да станат бавни при големи обеми данни.

---

## 7. Short Retrieval Quiz

1. Какво означава NoSQL и какви са основните му категории?
2. Каква е основната разлика между документо-ориентирана и key-value база данни?
3. Какво гласи CAP теоремата?
4. Дайте пример за ситуация, в която графова база данни е по-подходяща от релационна.
5. Какви са основните CRUD операции?
6. Какво е шардване и защо се използва?
7. Какви са рисковете при липса на схема в NoSQL база?

---

## 8. Quick Recap

- NoSQL базите данни предлагат гъвкавост и мащабируемост за съвременни приложения.
- Основните типове са документо-ориентирани, key-value, графови и колоно-ориентирани.
- Те не изискват фиксирани схеми и често използват различни езици за заявки.
- CAP теоремата описва ограниченията на разпределените системи.
- Изборът на подходяща NoSQL система зависи от конкретните нужди.
- CRUD операциите са основни за работа с данни.
- Внимателното моделиране и валидация са ключови за избягване на хаос в данните.

---

## 9. Spaced Review Plan

| Review Interval | Prompt                                                                 |
|-----------------|------------------------------------------------------------------------|
| 1 day           | Назовете основните типове NoSQL бази и дайте пример за всяка.          |
| 3 days          | Обяснете CAP теоремата с ваши думи и дайте практически пример.         |
| 1 week          | Опишете стъпките за създаване и извличане на данни в документо-DB.     |
| 1 month         | Анализирайте предимствата и недостатъците на NoSQL спрямо SQL системи. |