# Real_time_algorithms

## 1. Activate Prior Knowledge
- Какво разбирате под „реално време“ в контекста на алгоритми и софтуерни системи?
- Какви са основните разлики между алгоритми, които работят в реално време, и обикновени алгоритми?
- Можете ли да дадете примери за системи, в които времето за отговор е критично, например в AI или вградени системи?

## 2. Overview
Реалните алгоритми (Real-time algorithms) са специализирани алгоритми, които гарантират, че определени изчисления или задачи ще бъдат изпълнени в строго зададени времеви граници. Те са съществена част от системи, където закъсненията могат да доведат до сериозни проблеми, като например в управляващи системи за автомобили, медицински устройства, роботика и AI системи за автономно управление.

Тези алгоритми не само трябва да са коректни по отношение на резултата, но и да са детерминирани по отношение на времето за изпълнение. Това ги отличава от стандартните алгоритми, където времето за изпълнение е по-гъвкаво и не винаги критично.

В по-широк контекст, реално-времевите алгоритми са част от реално-времеви операционни системи (RTOS) и често работят в среди с ограничени ресурси, където трябва да се балансира между ефективност, надеждност и предсказуемост.

## 3. Key Concepts
- **Hard Real-time** – Системи или алгоритми, при които неспазването на времевите ограничения води до катастрофални последствия. Например, системи за управление на въздушен трафик.
- **Soft Real-time** – Системи, при които закъсненията са нежелани, но не критични. Например, стрийминг на видео или аудио.
- **Deadline (Краен срок)** – Максималното време, в което дадена задача или алгоритъм трябва да приключи.
- **Latency (Задръжка)** – Времето, което минава от началото на събитие до реакцията на системата.
- **Jitter** – Вариацията във времето на изпълнение или реакция, която трябва да бъде минимална в реално-времеви системи.
- **Scheduling (Планиране)** – Процесът на разпределяне на процесорно време между задачи, особено важен при реално-времеви системи.
- **Determinism (Детерминизъм)** – Свойството на алгоритъма да изпълнява задачите в предвидимо и повторяемо време.

## 4. Step-by-step Learning Path
1. **Фокус:** Основи на реално-времевите системи и алгоритми  
   **Задача:** Прочетете и обобщете разликите между hard и soft real-time системи.  
   **Въпроси:** Какво е hard real-time? Защо е важно да се спазват крайни срокове?

2. **Фокус:** Разбиране на времевите параметри: deadline, latency, jitter  
   **Задача:** Измерете latency и jitter в прост софтуерен процес (например реакция на бутон).  
   **Въпроси:** Как jitter влияе на реално-времевите системи? Как се измерва latency?

3. **Фокус:** Алгоритми за планиране (Scheduling) в реално време  
   **Задача:** Имплементирайте прост алгоритъм за планиране като Rate Monotonic Scheduling (RMS).  
   **Въпроси:** Какво е RMS? Как се определя приоритетът на задачите?

4. **Фокус:** Практическа работа с реално-времеви операционни системи (RTOS)  
   **Задача:** Настройте и тествайте задача с deadline в RTOS среда (например FreeRTOS).  
   **Въпроси:** Как RTOS гарантира спазване на времевите ограничения? Какво се случва при пропускане на deadline?

5. **Фокус:** Анализ и оптимизация на реално-времеви алгоритми  
   **Задача:** Анализирайте времето за изпълнение на алгоритъм и оптимизирайте кода за намаляване на latency.  
   **Въпроси:** Кои фактори влияят на времето за изпълнение? Как може да се минимизира jitter?

## 5. Examples
### Пример 1: Rate Monotonic Scheduling (RMS) – Планиране на задачи с фиксиран приоритет
```c
// Примерен код за RMS в C
typedef struct {
    int period;      // период на задачата
    int execution;   // време за изпълнение
    int priority;    // приоритет (по-малко число = по-висок приоритет)
} Task;

void schedule_tasks(Task tasks[], int n) {
    // Сортиране по период (RMS)
    // Изпълнение на задачите според приоритет
}
```

### Пример 2: Реакция на сензор в реално време (псевдокод)
```python
def sensor_reading():
    while True:
        data = read_sensor()
        process_data(data)
        sleep_until_next_period()
```

### Пример 3: Управление на deadline в FreeRTOS
```c
void vTaskFunction(void *pvParameters) {
    TickType_t xLastWakeTime = xTaskGetTickCount();
    const TickType_t xFrequency = pdMS_TO_TICKS(100);

    for (;;) {
        // Изпълнение на задача
        vTaskDelayUntil(&xLastWakeTime, xFrequency);
    }
}
```

## 6. Common Pitfalls
- **Игнориране на jitter** – Висок jitter може да разруши детерминизма и да доведе до непредвидими закъснения. Измервайте и минимизирайте jitter.
- **Прекалено сложни алгоритми** – Реално-времевите алгоритми трябва да са прости и предвидими. Сложността увеличава времето за изпълнение и риска от пропуснати крайни срокове.
- **Недооценяване на ресурсите** – Не всички системи имат достатъчно процесорна мощност или памет за реално-времеви задачи. Планирайте ресурсите внимателно.
- **Пропускане на deadline** – Необходимо е да се предвидят механизми за справяне с пропуснати крайни срокове, като fallback стратегии.
- **Липса на тестване в реална среда** – Симулирането не винаги отразява истинските условия. Тествайте алгоритмите на реален хардуер.

## 7. Short Retrieval Quiz
1. Какво означава hard real-time система?
2. Каква е разликата между latency и jitter?
3. Какво е deadline в контекста на реално-времеви алгоритми?
4. Как работи Rate Monotonic Scheduling?
5. Защо е важно детерминизмът в реално-времевите системи?
6. Какво може да се случи, ако пропуснем deadline?
7. Как RTOS помага за изпълнението на реално-времеви задачи?

## 8. Quick Recap
- Реално-времевите алгоритми гарантират изпълнение в строго зададени времеви рамки.
- Hard real-time системите изискват абсолютна гаранция за спазване на deadline.
- Времевите параметри като latency, jitter и deadline са ключови за анализа и дизайна.
- Алгоритмите за планиране (например RMS) определят приоритетите и реда на изпълнение.
- RTOS предоставят инфраструктура за управление на реално-времеви задачи.
- Оптимизацията и тестването в реална среда са критични за надеждността.
- Често срещаните грешки включват пренебрегване на jitter и недостатъчно ресурси.

## 9. Spaced Review Plan

| Време след учене | Преговорна задача                                    |
|------------------|-----------------------------------------------------|
| 1 ден            | Отговорете на краткия тест и прегледайте ключовите концепции. |
| 3 дни            | Имплементирайте прост реално-времеви алгоритъм и анализирайте резултатите. |
| 1 седмица        | Обяснете разликите между hard и soft real-time системи с примери. |
| 1 месец          | Прегледайте всички стъпки и приложете знанията в малък проект или казус. |