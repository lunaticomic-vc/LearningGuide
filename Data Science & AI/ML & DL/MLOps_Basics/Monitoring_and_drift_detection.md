# Monitoring_and_drift_detection

## 1. Activate Prior Knowledge
- Какво разбирате под „дрейф“ (drift) в контекста на машинно обучение и защо може да се появи?
- Как бихте следили качеството на AI система в продукция?
- Какви са възможните последици, ако не открием навреме промени в данните или поведението на модела?

## 2. Overview
Мониторингът и откриването на дрейф са ключови компоненти за поддържане на надеждността и ефективността на AI системи в реални условия. След като моделът бъде обучен и внедрен, данните и средата, в която работи, могат да се променят с времето. Тези промени могат да доведат до влошаване на представянето, което изисква бърза реакция.

Мониторингът включва непрекъснато наблюдение на входните данни, изходите на модела и метрики за качество, за да се открият аномалии или отклонения. Откриването на дрейф е процесът на идентифициране на статистически значими промени в разпределението на данните или във връзката между вход и изход, които могат да сигнализират за проблеми.

Тези практики са критични в индустрии като здравеопазване, финанси и автономни системи, където грешките могат да имат сериозни последици. Освен това, мониторингът и дрейф детекцията подпомагат поддръжката и обновяването на моделите, като осигуряват дългосрочна устойчивост.

## 3. Key Concepts
- **Data Drift** – Промяна в разпределението на входните данни с времето. Може да се сравни с промяна в характеристиките на клиентите, които използват системата.
- **Concept Drift** – Промяна във връзката между входните данни и целевата променлива (изхода). Представете си, че правилата за вземане на решение се променят.
- **Monitoring Metrics** – Метрики като accuracy, precision, recall, F1-score, но и статистически показатели за входните данни (напр. средна стойност, вариация).
- **Alerting** – Автоматично уведомяване при откриване на аномалии или дрейф, за да може екипът да реагира бързо.
- **Retraining** – Процес на преобучение на модела с нови данни, за да се адаптира към промените.
- **Statistical Tests for Drift** – Тестове като Kolmogorov-Smirnov, Chi-Square, които сравняват разпределенията на данните.
- **Baseline Distribution** – Оригиналното разпределение на данните, използвано като референтна точка за сравнение.

## 4. Step-by-step Learning Path
1. **Фокус:** Разберете видовете дрейф (data vs concept drift).  
   **Задача:** Прочетете и обобщете примери за двата вида дрейф.  
   **Въпроси:** Какво е основното различие между data и concept drift? Защо concept drift е по-труден за откриване?

2. **Фокус:** Изучете методи за мониторинг на входните данни.  
   **Задача:** Създайте скрипт, който изчислява и визуализира разпределението на ключова характеристика в реално време.  
   **Въпроси:** Какви статистически метрики са подходящи за мониторинг? Какво показва промяна в средната стойност?

3. **Фокус:** Запознайте се с техники за откриване на дрейф.  
   **Задача:** Имплементирайте Kolmogorov-Smirnov тест за сравнение на две разпределения.  
   **Въпроси:** Какво означава p-стойността в този тест? Кога можем да заключим, че има дрейф?

4. **Фокус:** Разгледайте системи за автоматично алармиране и реакция.  
   **Задача:** Конфигурирайте аларма, която се задейства при значителна промяна в метриките.  
   **Въпроси:** Какви са предимствата и рисковете от автоматичните аларми?

5. **Фокус:** Практикувайте обновяване на модел след откриване на дрейф.  
   **Задача:** Създайте процес за преобучение на модел с нови данни и оценете подобрението.  
   **Въпроси:** Как да изберем кога да преобучим модела? Какви са рисковете при често преобучение?

## 5. Examples
### Пример 1: Мониторинг на входни данни с Python и Pandas
```python
import pandas as pd
import matplotlib.pyplot as plt

# Зареждаме исторически и нови данни
baseline = pd.read_csv('baseline_data.csv')
current = pd.read_csv('current_data.csv')

# Визуализиране на разпределението на ключова характеристика
plt.hist(baseline['feature'], alpha=0.5, label='Baseline')
plt.hist(current['feature'], alpha=0.5, label='Current')
plt.legend()
plt.title('Feature Distribution Comparison')
plt.show()
```

### Пример 2: Kolmogorov-Smirnov тест за откриване на дрейф
```python
from scipy.stats import ks_2samp

stat, p_value = ks_2samp(baseline['feature'], current['feature'])
print(f"KS Statistic: {stat}, p-value: {p_value}")

if p_value < 0.05:
    print("Има статистически значим дрейф в данните.")
else:
    print("Данните не показват значим дрейф.")
```

### Пример 3: Автоматична аларма при дрейф (псевдокод)
```python
if p_value < 0.05:
    send_alert("Drift detected in feature distribution")
```

## 6. Common Pitfalls
- **Игнориране на концептуалния дрейф** – Много системи следят само входните данни, но не и промяната в зависимостите, което води до пропуски.
- **Прекалено чувствителни аларми** – Настройване на прекалено ниски прагове води до фалшиви аларми и „умора“ на екипа.
- **Недостатъчно данни за сравнение** – Малки проби могат да доведат до неточни заключения за дрейф.
- **Липса на автоматизация** – Ръчното следене е бавно и неефективно, особено при големи системи.
- **Прекалено честото преобучение** – Може да доведе до overfitting към новите данни и загуба на стабилност.

## 7. Short Retrieval Quiz
1. Какво представлява data drift и как се различава от concept drift?
2. Коя статистическа техника може да се използва за откриване на дрейф?
3. Защо е важно да се следят не само входните данни, но и изходите на модела?
4. Какви са рисковете при прекалено чувствителни аларми?
5. Какво е основното предназначение на мониторинга в AI системи?
6. Кога е подходящо да се преобучи модел?
7. Какво означава p-стойността в Kolmogorov-Smirnov теста?

## 8. Quick Recap
- Мониторингът и откриването на дрейф са критични за поддържане на качеството на AI системи в продукция.
- Data drift означава промяна в разпределението на входните данни, concept drift – промяна във връзката между вход и изход.
- Използват се статистически тестове и метрики за откриване на дрейф.
- Автоматичните аларми помагат за бърза реакция, но трябва да са добре настроени.
- Преобучението на модел е необходима стъпка при значителен дрейф.
- Честото и неадекватно преобучение може да навреди на стабилността на системата.
- Практическите задачи включват мониторинг на данни, тестване за дрейф и настройка на аларми.

## 9. Spaced Review Plan

| Време след учене | Промпт за преговор                                   |
|-------------------|-----------------------------------------------------|
| 1 ден             | Обяснете разликата между data drift и concept drift.|
| 3 дни             | Опишете как се използва Kolmogorov-Smirnov тест.    |
| 1 седмица         | Дайте пример за автоматична система за алармиране.  |
| 1 месец           | Обобщете основните стъпки при мониторинг и дрейф детекция. |