# 01 - RDBMS fundamentals

## 1. Activate Prior Knowledge

- Какви видове бази данни познавате и каква е разликата между релационни и нерелационни бази данни?
- Защо е важно да се осигурява целостта и последователността на данните в системи, използвани от изкуствен интелект или големи софтуерни приложения?
- Можете ли да си представите какво би се случило, ако множество потребители едновременно променят една и съща информация в база данни?

## 2. Overview

Релационната система за управление на бази данни (RDBMS) е сърцето на съвременните информационни системи. Тя позволява ефективно съхранение, обработка и извличане на структурирани данни, като използва таблици, които са свързани по определени правила. RDBMS осигурява надеждност, сигурност и последователност на данните, което е критично за всяко приложение, което разчита на точна и актуална информация.

В контекста на софтуерното инженерство и AI системите, RDBMS често служи като основен слой за съхранение на данни, върху който се изграждат по-сложни анализи, препоръчителни системи или автоматизирани решения. Чрез стандартизирания език SQL, разработчиците могат да манипулират данните по мощен и гъвкав начин.

RDBMS е предпочитан избор, когато се изисква транзакционна обработка, ACID свойства (атомарност, консистентност, изолация, дълготрайност) и възможност за сложни заявки. Това го прави незаменим инструмент за бизнеси, банки, здравеопазване и всяка сфера, където данните са критичен ресурс.

## 3. Key Concepts

- **Table (Таблица)** – Основната структура за съхранение на данни; представете си електронна таблица с редове и колони.
- **Row (Ред/Запис)** – Единичен запис в таблицата; аналогично на един ред в Excel.
- **Column (Колона/Поле)** – Атрибут или характеристика на данните; всяка колона съдържа определен тип информация.
- **Primary Key (Първичен ключ)** – Уникален идентификатор за всеки ред в таблицата; като ЕГН за човек.
- **Foreign Key (Външен ключ)** – Поле, което свързва две таблици; като препратка или връзка между различни списъци.
- **SQL (Structured Query Language)** – Стандартизиран език за заявки и манипулация на данни в RDBMS.
- **ACID Properties** – Група от свойства (Atomicity, Consistency, Isolation, Durability), гарантиращи надеждността на транзакциите.
- **Normalization (Нормализация)** – Процес на организиране на данните с цел минимизиране на излишъците и осигуряване на целостта.

## 4. Step-by-step Learning Path

1. **Запознаване със структурата на таблица**
   - Фокус: Как се дефинират таблици, редове и колони.
   - Задача: Създайте таблица "users" с колони id, name, email.
   - Въпрос: Каква е разликата между ред и колона? Какво представлява първичният ключ?

2. **Въвеждане на данни и основни SQL заявки**
   - Фокус: Използване на INSERT и SELECT.
   - Задача: Добавете три записа в таблицата "users" и извлечете всички записи.
   - Въпрос: Как се добавя нов запис? Как се извличат всички данни от таблица?

3. **Връзки между таблици**
   - Фокус: Създаване на външни ключове и JOIN операции.
   - Задача: Създайте таблица "orders" със външен ключ към "users". Извлечете всички поръчки с информация за потребителя.
   - Въпрос: Какво е външен ключ? Как JOIN свързва данни от две таблици?

4. **Транзакции и ACID свойства**
   - Фокус: Какво е транзакция и защо е важна.
   - Задача: Изпълнете поредица от SQL заявки в транзакция и я потвърдете или отменете.
   - Въпрос: Какво гарантират ACID свойствата? Какво се случва при неуспешна транзакция?

5. **Нормализация**
   - Фокус: Разделяне на данни за избягване на дублиране.
   - Задача: Преобразувайте таблица с дублиращи се данни в две нормализирани таблици.
   - Въпрос: Как нормализацията подобрява структурата на базата данни?

## 5. Examples

### Пример 1: Създаване на таблица и добавяне на данни

```sql
CREATE TABLE users (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  email VARCHAR(100)
);

INSERT INTO users (id, name, email) VALUES
(1, 'Ivan Ivanov', 'ivan@example.com'),
(2, 'Maria Petrova', 'maria@example.com');
```

### Пример 2: Връзка между таблици и JOIN

```sql
CREATE TABLE orders (
  order_id INT PRIMARY KEY,
  user_id INT,
  product VARCHAR(100),
  FOREIGN KEY (user_id) REFERENCES users(id)
);

SELECT users.name, orders.product
FROM users
JOIN orders ON users.id = orders.user_id;
```

### Пример 3: Транзакция

```sql
BEGIN;
UPDATE users SET email = 'new_email@example.com' WHERE id = 1;
INSERT INTO orders (order_id, user_id, product) VALUES (1, 1, 'Laptop');
COMMIT;
```

## 6. Common Pitfalls

- **Използване на неуникални първични ключове** – Винаги дефинирайте уникални идентификатори, за да избегнете объркване и загуба на данни.
- **Пропускане на външни ключове** – Липсата на връзки между таблици води до несвързани данни и затруднява анализа.
- **Пренебрегване на транзакциите** – Ако не използвате транзакции при критични операции, може да възникнат частично записани или неконсистентни данни.
- **Липса на нормализация** – Съхраняването на дублиращи се данни увеличава риска от грешки и затруднява поддръжката.

## 7. Short Retrieval Quiz

1. Какво е релационна база данни?
2. Каква е ролята на първичния ключ в една таблица?
3. Какво означава ACID в контекста на транзакциите?
4. Защо използваме външни ключове?
5. Какво е нормализация и защо е важна?
6. Как се извличат данни от две свързани таблици?
7. Какво би се случило, ако не използваме транзакции при множество свързани операции?

## 8. Quick Recap

- RDBMS съхранява и управлява структурирани данни чрез таблици, редове и колони.
- Основни елементи са първичните и външните ключове, които осигуряват уникалност и връзки.
- SQL е стандартният език за заявки и манипулация на данни.
- ACID свойствата гарантират надеждността на транзакциите.
- Нормализацията подобрява структурата и целостта на данните.
- JOIN операциите позволяват комбиниране на данни от различни таблици.
- Избягвайте често срещани грешки като липса на ключове, транзакции и нормализация.

## 9. Spaced Review Plan

| Review Interval | Review Prompt                                              |
|-----------------|-----------------------------------------------------------|
| 1 day           | Обяснете разликата между първичен и външен ключ с пример. |
| 3 days          | Опишете ACID свойствата и дайте пример за транзакция.     |
| 1 week          | Създайте две таблици с връзка и изпълнете JOIN заявка.     |
| 1 month         | Обяснете процеса на нормализация и защо е необходим.       |