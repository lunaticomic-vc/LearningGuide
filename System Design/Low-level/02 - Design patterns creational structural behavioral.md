# 02 - Design patterns creational structural behavioral

## 1. Activate Prior Knowledge

- Какви са основните предизвикателства при създаването и поддръжката на големи софтуерни системи, особено в контекста на ИИ или сложни приложения?
- Можете ли да си спомните ситуации, в които сте използвали повторно дадено решение или структура в различни проекти?
- Как мислите, че шаблоните на проектиране (design patterns) могат да помогнат за подобряване на разширяемостта и поддръжката на кода?

## 2. Overview

Design patterns са изпитани решения на често срещани проблеми при проектирането на софтуер. Те не са готови парчета код, а по-скоро описания или шаблони, които могат да се прилагат в различни ситуации. В контекста на софтуерното инженерство, особено при разработката на ИИ системи, използването на правилните шаблони улеснява създаването на гъвкави, разширяеми и лесни за поддръжка архитектури.

Шаблоните на проектиране се делят на три основни групи: създаващи (creational), структурни (structural) и поведенчески (behavioral). Всяка група решава различен клас проблеми – от това как се създават обекти, през начина по който те се свързват, до начина по който комуникират и си взаимодействат.

Разбирането и прилагането на тези шаблони е особено важно в екипна среда, където последователността и предвидимостта на архитектурните решения са от ключово значение. Те също така подпомагат писането на по-четим, повторно използваем и лесен за тестване код.

## 3. Key Concepts

- **Design Pattern** – Универсално решение на често срещан проблем в софтуерното проектиране. Може да се сравни с рецепта за готвене, която може да се адаптира според нуждите.
- **Creational Patterns** – Шаблони, които се фокусират върху процеса на създаване на обекти. Те помагат да се избегне твърдото свързване между кода и конкретните класове.
- **Structural Patterns** – Описват начини за комбиниране на класове и обекти, за да се създадат по-големи структури. Мислете за тях като за строителни блокчета или лего елементи.
- **Behavioral Patterns** – Фокусират се върху комуникацията и взаимодействието между обекти. Те са като правила за водене на разговор между различни участници в система.
- **Abstraction** – Процесът на скриване на детайли и показване само на съществената информация.
- **Loose Coupling** – Дизайн, при който компонентите са слабо свързани и могат да се променят независимо един от друг.

## 4. Step-by-step Learning Path

1. **Запознайте се с трите категории шаблони**  
   - Фокус: Разберете разликите между creational, structural и behavioral patterns.  
   - Практическа задача: Направете таблица с по 2 примера за всеки тип шаблон.  
   - Въпроси: Какво отличава creational от structural patterns? Кога бихте използвали behavioral pattern?

2. **Изучете един шаблон от всяка категория**  
   - Фокус: Изберете Factory Method (creational), Adapter (structural), Observer (behavioral).  
   - Практическа задача: Намерете или създайте кратък кодов пример за всеки от тях.  
   - Въпроси: Как Factory Method улеснява разширяемостта? Как Adapter помага при интеграция на стари и нови компоненти?

3. **Приложете шаблон в малък проект**  
   - Фокус: Изберете реален проблем (например система за известия) и приложете подходящ шаблон.  
   - Практическа задача: Имплементирайте Observer pattern за известяване на потребители.  
   - Въпроси: Какви са предимствата на Observer спрямо директното извикване на методи?

4. **Сравнете шаблони и алтернативни решения**  
   - Фокус: Анализирайте кога използването на шаблон е по-добро от ad-hoc решение.  
   - Практическа задача: Напишете две версии на един и същи проблем – с и без шаблон.  
   - Въпроси: Какви са плюсовете и минусите на всяко решение?

## 5. Examples

### Пример 1: Factory Method (Creational)

```python
class Animal:
    def speak(self):
        pass

class Dog(Animal):
    def speak(self):
        return "Bark!"

class Cat(Animal):
    def speak(self):
        return "Meow!"

def animal_factory(animal_type):
    if animal_type == "dog":
        return Dog()
    elif animal_type == "cat":
        return Cat()
    else:
        raise ValueError("Unknown animal")

pet = animal_factory("dog")
print(pet.speak())  # Изход: Bark!
```

### Пример 2: Adapter (Structural)

```python
class OldPrinter:
    def print_text(self, text):
        print(f"Old Printer: {text}")

class NewPrinter:
    def print(self, text):
        print(f"New Printer: {text}")

class PrinterAdapter:
    def __init__(self, old_printer):
        self.old_printer = old_printer

    def print(self, text):
        self.old_printer.print_text(text)

printer = PrinterAdapter(OldPrinter())
printer.print("Hello!")  # Изход: Old Printer: Hello!
```

### Пример 3: Observer (Behavioral)

```python
class Subject:
    def __init__(self):
        self.observers = []

    def attach(self, observer):
        self.observers.append(observer)

    def notify(self, message):
        for observer in self.observers:
            observer.update(message)

class Observer:
    def update(self, message):
        print(f"Received: {message}")

subject = Subject()
observer1 = Observer()
subject.attach(observer1)
subject.notify("Update available!")  # Изход: Received: Update available!
```

## 6. Common Pitfalls

- **Използване на шаблон без нужда** – Не прилагайте шаблон само заради самия шаблон; анализирайте дали наистина решава конкретен проблем.
- **Прекалено усложняване на кода** – Понякога шаблоните могат да направят кода по-сложен, отколкото е необходимо. Използвайте ги пестеливо.
- **Неправилно разбиране на ролите** – Объркване между участниците в шаблона (например кой е Observer и кой е Subject).
- **Силно свързване (tight coupling)** – Грешна имплементация, при която обектите остават твърдо свързани, въпреки че шаблонът цели обратното.

## 7. Short Retrieval Quiz

1. Какво е основната цел на creational шаблоните?
2. Дайте пример за structural шаблон и опишете накратко предназначението му.
3. Как Observer pattern улеснява комуникацията между обекти?
4. Какво означава loose coupling и защо е важно?
5. Кога бихте използвали Adapter pattern?
6. Какви са рисковете при прекомерна употреба на шаблони?
7. Каква е разликата между behavioral и structural patterns?

## 8. Quick Recap

- Design patterns са изпитани решения на често срещани проблеми в софтуерното проектиране.
- Съществуват три основни групи: creational, structural и behavioral.
- Creational patterns управляват създаването на обекти.
- Structural patterns дефинират как обектите се комбинират в по-големи структури.
- Behavioral patterns управляват взаимодействието и комуникацията между обекти.
- Използването на шаблони подобрява разширяемостта и поддръжката на кода.
- Важно е да се прилагат шаблони само когато наистина са необходими.

## 9. Spaced Review Plan

| Review Time | Prompt                                                      |
|-------------|-------------------------------------------------------------|
| 1 day       | Избройте трите основни групи шаблони и дайте по един пример. |
| 3 days      | Обяснете разликата между Adapter и Observer pattern.         |
| 1 week      | Напишете кратък кодов пример за Factory Method.              |
| 1 month     | Опишете ситуация, в която използването на шаблон е подобрило архитектурата на ваш проект. |