# 05 - Containers and Docker fundamentals

## 1. Activate Prior Knowledge

- Какви проблеми срещате при разгръщане и поддържане на сложни софтуерни системи в различни среди (например: development, testing, production)?
- Чували ли сте за виртуални машини? Как си представяте разликата между виртуална машина и контейнер?
- Как мислите, че контейнерите могат да помогнат при разработката и внедряването на AI системи?

---

## 2. Overview

Контейнерите са лека технология за изолиране на приложения и техните зависимости в самостоятелни, преносими единици. За разлика от виртуалните машини, контейнерите споделят ядрото на операционната система, което ги прави много по-леки и бързи за стартиране.

Docker е най-популярната платформа за създаване, управление и разпространение на контейнери. Тя позволява на разработчиците да опаковат приложенията си с всички необходими библиотеки и конфигурации, осигурявайки предвидимо поведение във всяка среда.

В контекста на AI и софтуерното инженерство, контейнерите улесняват възпроизвеждането на експерименти, скалирането на услуги и интеграцията между различни компоненти. Те са ключов компонент на съвременните DevOps и CI/CD практики.

---

## 3. Key Concepts

- **Container** – Самостоятелна, изолирана среда, в която работи дадено приложение с всички негови зависимости. Може да се мисли като „кутия“, която носи всичко необходимо за стартиране на програмата.
- **Docker** – Платформа за създаване, управление и разпространение на контейнери. Подобно на „контейнерен кораб“, който пренася множество контейнери между пристанища (среди).
- **Image** – Шаблон (snapshot) за контейнер, съдържащ файловата система и инструкциите за стартиране на приложението. Може да се сравни с „рецепта“ за създаване на контейнер.
- **Dockerfile** – Текстов файл с инструкции за изграждане на Docker image. Подобно на готварска рецепта, описваща стъпките за приготвяне на ястие.
- **Registry** – Централизирано място за съхранение и споделяне на Docker images (напр. Docker Hub).
- **Volume** – Механизъм за съхранение на данни извън контейнера, така че те да се запазят при рестартиране или изтриване на контейнера.
- **Orchestration** – Управление на множество контейнери в големи системи (напр. с Kubernetes).

---

## 4. Step-by-step Learning Path

1. **Разберете основите на контейнерите**
   - Фокус: Какво е контейнер и как се различава от виртуална машина.
   - Практическа задача: Потърсете и сравнете диаграми на VM и контейнер.
   - Въпроси: Какви ресурси споделят контейнерите? Какво ги прави по-леки от VM?

2. **Инсталирайте Docker**
   - Фокус: Инсталиране на Docker на вашата операционна система.
   - Практическа задача: Инсталирайте Docker Community Edition и стартирайте `docker --version`.
   - Въпроси: Как проверявате дали Docker работи? Какво означава „Docker daemon“?

3. **Стартирайте първия си контейнер**
   - Фокус: Работа с базови Docker команди.
   - Практическа задача: Стартирайте `docker run hello-world` и обяснете какво се случва.
   - Въпроси: Какво е image? Какво е container?

4. **Създайте собствен Docker image**
   - Фокус: Писане на Dockerfile и изграждане на image.
   - Практическа задача: Напишете Dockerfile за Python приложение и изградете image с `docker build`.
   - Въпроси: Каква е ролята на Dockerfile? Как се създава нов image?

5. **Работа с данни и мрежи**
   - Фокус: Използване на volumes и мрежи за споделяне на данни и комуникация между контейнери.
   - Практическа задача: Стартирайте контейнер с volume и проверете дали данните се запазват.
   - Въпроси: Какво е volume? Как контейнерите комуникират помежду си?

6. **Публикуване и споделяне на images**
   - Фокус: Използване на Docker Hub за споделяне на images.
   - Практическа задача: Качете ваш image в Docker Hub.
   - Въпроси: Как се качва image в registry? Какво е публичен vs. частен registry?

---

## 5. Examples

### Пример 1: Стартиране на официален контейнер

```bash
docker run -it ubuntu bash
```
*Стартира интерактивна Ubuntu среда, в която може да изпълнявате команди.*

---

### Пример 2: Dockerfile за Python приложение

```dockerfile
FROM python:3.10
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["python", "main.py"]
```
*Този Dockerfile създава image за Python приложение, инсталира зависимостите и стартира main.py.*

---

### Пример 3: Използване на volume за съхранение на данни

```bash
docker run -v $(pwd)/data:/data myimage
```
*Свързва локалната папка `data` с папката `/data` в контейнера.*

---

## 6. Common Pitfalls

- **Забравяне на .dockerignore файл** – Без него ненужни файлове (например node_modules, .git) попадат в image-а и го правят по-голям.
- **Твърде големи images** – Неоптимизирани Dockerfile-и водят до излишно големи images. Използвайте по-малки базови images и мултистейдж билдове.
- **Липса на volume за данни** – Ако не използвате volumes, данните се губят при изтриване на контейнера.
- **Използване на :latest tag без разбиране** – Това може да доведе до неочаквани промени при обновяване на images.
- **Неправилно управление на портове и мрежи** – Забравяне да се експонират нужните портове или неправилна мрежова конфигурация.

---

## 7. Short Retrieval Quiz

1. Каква е основната разлика между контейнер и виртуална машина?
2. Какво съдържа Docker image?
3. За какво служи Dockerfile?
4. Как се нарича мястото, където се съхраняват и споделят images?
5. Какво е volume и защо е важно?
6. Как се стартира контейнер от image?
7. Какви са предимствата на контейнерите при разработка на AI системи?

---

## 8. Quick Recap

- Контейнерите са лека форма на виртуализация, която осигурява изолирана среда за приложения.
- Docker е водещата платформа за работа с контейнери.
- Docker images са шаблони, от които се създават контейнери.
- Dockerfile описва стъпките за създаване на image.
- Volumes позволяват съхранение на данни извън контейнера.
- Контейнерите улесняват разгръщането, скалирането и възпроизвеждането на софтуерни системи.
- Правилното използване на Docker подобрява ефективността на DevOps процесите.

---

## 9. Spaced Review Plan

| Review Time | Prompt                                                                 |
|-------------|------------------------------------------------------------------------|
| 1 day       | Обяснете разликата между контейнер и виртуална машина с пример.        |
| 3 days      | Опишете как бихте създали и споделили свой Docker image.               |
| 1 week      | Какви са основните предимства и рискове при използване на volumes?     |
| 1 month     | Дайте пример за реален сценарий, в който контейнерите улесняват работата ви. |