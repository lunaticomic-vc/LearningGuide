# Hash_functions_and_collisions

## 1. Activate Prior Knowledge
- Какво представлява функцията в програмирането и какво е нейното значение при обработка на данни?
- Как мислите, че компютърните системи бързо намират и проверяват големи обеми информация, например в бази данни или AI модели?
- Какво може да се случи, ако две различни входни стойности дават една и съща изходна стойност в някаква функция?

## 2. Overview
Хеш функциите са математически алгоритми, които преобразуват входни данни с произволна дължина в фиксирана по размер стойност, наречена хеш код. Този код служи като уникален идентификатор за оригиналните данни, което позволява бързо търсене, сравняване и съхранение. В контекста на софтуерното инженерство и системите за изкуствен интелект, хеш функциите са основен инструмент за оптимизация на производителността и сигурността.

В по-широката система, хеш функциите се използват в структури от данни като хеш таблици, криптография, проверка на целостта на файлове и индексиране на големи бази данни. Те са критични за ефективното управление на информацията и предотвратяването на грешки при съхранение и предаване на данни.

Колизиите са неизбежен феномен при хеш функциите – това са случаи, когато две различни входни стойности произвеждат еднакъв хеш код. Разбирането и управлението на колизиите е ключово за поддържане на надеждността и ефективността на системите, които разчитат на хеширане.

## 3. Key Concepts
- **Hash Function (Хеш функция)** – алгоритъм, който преобразува входни данни с произволна дължина в фиксирана по размер стойност (хеш код). Можем да си я представим като „отпечатък“ на данните.
- **Hash Code (Хеш код)** – резултатът от хеш функцията, който служи като уникален идентификатор на входните данни.
- **Collision (Колизия)** – ситуация, при която две различни входни стойности имат еднакъв хеш код. Аналогия: два различни ключа, които отварят един и същ шкаф.
- **Hash Table (Хеш таблица)** – структура от данни, която използва хеш кодове за бързо съхранение и търсене на елементи.
- **Collision Resolution (Разрешаване на колизии)** – техники за справяне с колизиите, като например отворено адресиране или вериги (chaining).
- **Deterministic (Детерминистичен)** – свойство на хеш функцията винаги да връща един и същ хеш код за един и същ вход.
- **Uniform Distribution (Равномерно разпределение)** – желано свойство на хеш функцията, при което хеш кодовете са разпределени равномерно, за да се минимизират колизиите.

## 4. Step-by-step Learning Path
1. **Разберете основите на хеш функциите**
   - Фокус: Какво е хеш функция и как работи.
   - Задача: Напишете проста хеш функция за низове, която сумира ASCII стойностите на символите и връща остатъка при деление по фиксирано число.
   - Въпроси: Какво означава детерминистичност? Защо е важно хеш кодовете да са с фиксирана дължина?

2. **Изследвайте колизиите и тяхното влияние**
   - Фокус: Как възникват колизиите и защо са проблем.
   - Задача: Създайте пример с хеш функция, при която няколко различни входа дават еднакъв хеш код.
   - Въпроси: Какво е колизия? Как колизиите влияят на производителността на хеш таблиците?

3. **Научете техники за разрешаване на колизии**
   - Фокус: Методи като chaining и open addressing.
   - Задача: Имплементирайте хеш таблица с разрешаване на колизии чрез chaining.
   - Въпроси: Как работи chaining? Какво е предимството на open addressing?

4. **Приложете хеш функции в реални системи**
   - Фокус: Използване на хеш функции в бази данни, кеширане и криптография.
   - Задача: Използвайте вградената хеш функция на език за програмиране (например Python `hash()`) за създаване на кешираща система.
   - Въпроси: Защо хеш функциите са важни за сигурността? Какво е значение на uniform distribution?

## 5. Examples
- **Пример 1: Проста хеш функция за низове на Python**
```python
def simple_hash(s, table_size):
    return sum(ord(c) for c in s) % table_size

print(simple_hash("apple", 10))  # Изход: 5
print(simple_hash("banana", 10)) # Изход: 3
```

- **Пример 2: Хеш таблица с chaining**
```python
class HashTable:
    def __init__(self, size):
        self.size = size
        self.table = [[] for _ in range(size)]

    def _hash(self, key):
        return sum(ord(c) for c in key) % self.size

    def insert(self, key, value):
        idx = self._hash(key)
        for pair in self.table[idx]:
            if pair[0] == key:
                pair[1] = value
                return
        self.table[idx].append([key, value])

    def get(self, key):
        idx = self._hash(key)
        for pair in self.table[idx]:
            if pair[0] == key:
                return pair[1]
        return None

ht = HashTable(10)
ht.insert("apple", 1)
ht.insert("banana", 2)
print(ht.get("apple"))  # Изход: 1
```

- **Пример 3: Колизия при проста хеш функция**
```python
print(simple_hash("abc", 10))  # Изход: 6
print(simple_hash("cab", 10))  # Изход: 6 - колизия
```

## 6. Common Pitfalls
- **Използване на неподходяща хеш функция** – твърде проста функция води до много колизии и лоша производителност.
- **Игнориране на колизиите** – непредвидените колизии могат да доведат до загуба на данни или неправилно поведение.
- **Неправилно управление на паметта при chaining** – неефективна имплементация може да увеличи времето за търсене.
- **Зависимост от нестабилни хеш функции** – някои вградени хеш функции могат да се променят между изпълнения, което е проблем за постоянни структури.
- **Липса на равномерно разпределение** – ако хеш функцията не разпределя равномерно, някои клетки на таблицата се претоварват.

## 7. Short Retrieval Quiz
1. Какво представлява хеш функцията?
2. Защо колизиите са проблем в хеш таблиците?
3. Какво е chaining при разрешаване на колизии?
4. Какво означава детерминистична хеш функция?
5. Какво е целта на равномерното разпределение на хеш кодовете?
6. Дайте пример за ситуация, в която хеш функцията се използва в AI системи.
7. Какво може да се случи, ако не се обработват колизиите?

## 8. Quick Recap
- Хеш функциите преобразуват данни в фиксирана по размер стойност, която служи за бързо търсене и идентификация.
- Колизиите са неизбежни, когато различни входове имат еднакъв хеш код.
- Управлението на колизиите е ключово за ефективността на хеш таблиците.
- Различни техники като chaining и open addressing помагат за разрешаване на колизии.
- Хеш функциите са широко използвани в бази данни, криптография и AI системи.
- Детерминистичността и равномерното разпределение са важни свойства на добрите хеш функции.
- Неправилната имплементация може да доведе до загуба на данни и намалена производителност.

## 9. Spaced Review Plan

| Време след учене | Промпт за преговор                                      |
|------------------|--------------------------------------------------------|
| 1 ден            | Обяснете с прости думи какво е хеш функция и колизия. |
| 3 дни            | Опишете две техники за разрешаване на колизии.         |
| 1 седмица        | Напишете пример за хеш функция и демонстрирайте колизия.|
| 1 месец          | Обсъдете ролята на хеш функциите в сигурността на системите. |