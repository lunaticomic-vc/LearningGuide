# 01 - Operating system fundamentals and process management

## 1. Activate Prior Knowledge

- Какво се случва, когато стартирате програма на компютъра си? Кои компоненти на системата участват в този процес?
- Как операционните системи подпомагат работата на изкуствения интелект или сложни софтуерни приложения?
- Можете ли да си представите какво би се случило, ако няколко програми се опитат да използват един и същ хардуерен ресурс едновременно?

## 2. Overview

Операционната система (ОС) е основният софтуерен слой, който управлява хардуера на компютъра и предоставя услуги за изпълнение на приложения. Тя действа като посредник между потребителските програми и физическите ресурси, като процесор, памет и устройства за вход/изход. Без операционна система, програмистите трябва да управляват хардуера директно, което е сложно и неефективно.

Процесите са основните единици на изпълнение в една ОС. Те представляват работещи програми, всяка със собствено адресно пространство и ресурси. Управлението на процесите е критично за ефективността, сигурността и стабилността на цялата система.

В контекста на изкуствения интелект и съвременния софтуер, операционната система осигурява изолация, паралелизъм и контрол на ресурсите, което позволява едновременното изпълнение на множество задачи и ефективно използване на хардуера.

## 3. Key Concepts

- Operating System (Операционна система) – Софтуер, който управлява хардуера и предоставя интерфейс за приложенията. Може да се мисли като "диригент" на компютърния "оркестър".
- Process (Процес) – Активен екземпляр на програма в изпълнение, със собствена памет и ресурси. Представете си го като "работник", който изпълнява задача.
- Thread (Нишка) – Лека единица на изпълнение в рамките на процеса, споделяща паметта му. Подобно на "екип" от работници, които работят по една и съща задача.
- Process Scheduling (Планиране на процеси) – Механизъм, чрез който ОС определя кой процес или нишка да използва процесора в даден момент.
- Context Switch (Смяна на контекст) – Процесът на превключване между различни процеси или нишки, изискващ запазване и възстановяване на състоянието им.
- Interprocess Communication (IPC, Междупроцесна комуникация) – Методи, чрез които процесите обменят информация (напр. чрез сигнали, съобщения, споделена памет).
- Deadlock (Задънена улица) – Ситуация, при която два или повече процеса се блокират взаимно, чакайки ресурси, които никога няма да получат.

## 4. Step-by-step Learning Path

1. **Разберете ролята на операционната система**
   - Фокус: Как ОС управлява хардуера и ресурсите.
   - Задача: Направете списък на основните функции на ОС (например управление на памет, процеси, файлове).
   - Въпроси: Какво би се случило без ОС? Кои са основните ѝ отговорности?

2. **Изучете концепцията за процес**
   - Фокус: Какво представлява процесът и как се различава от програма.
   - Задача: Използвайте `ps` или Task Manager, за да видите текущите процеси на вашата система.
   - Въпроси: Какво е процес? Как се създава и унищожава процес?

3. **Разгледайте нишките и паралелизма**
   - Фокус: Разлика между процес и нишка; предимства на многонитово програмиране.
   - Задача: Напишете малка програма с две нишки (например на Python или C).
   - Въпроси: Какво споделят нишките? Кога е по-добре да използвате нишки вместо процеси?

4. **Проучете планирането на процеси**
   - Фокус: Как ОС избира кой процес да изпълнява.
   - Задача: Изследвайте и сравнете различни алгоритми за планиране (FIFO, Round Robin, Priority).
   - Въпроси: Какво е контекстна смяна? Какви са критериите за добро планиране?

5. **Запознайте се с междупроцесната комуникация**
   - Фокус: Методи за обмен на информация между процеси.
   - Задача: Имплементирайте проста комуникация между два процеса (например чрез pipe или socket).
   - Въпроси: Какви са предимствата и недостатъците на различните IPC механизми?

## 5. Examples

### Пример 1: Създаване на процес в Linux

```bash
$ ls &
```
Тази команда стартира `ls` като фонов процес.

### Пример 2: Проста многонитова програма на Python

```python
import threading

def print_numbers():
    for i in range(5):
        print(i)

t1 = threading.Thread(target=print_numbers)
t2 = threading.Thread(target=print_numbers)
t1.start()
t2.start()
```

### Пример 3: Междупроцесна комуникация с pipe в C

```c
#include <unistd.h>
#include <stdio.h>

int main() {
    int fd[2];
    pipe(fd);
    if (fork() == 0) {
        // Child process
        close(fd[1]);
        char buf[10];
        read(fd[0], buf, 10);
        printf("Child read: %s\n", buf);
    } else {
        // Parent process
        close(fd[0]);
        write(fd[1], "Hello", 6);
    }
    return 0;
}
```

## 6. Common Pitfalls

- Смесване на понятията "процес" и "нишка" – процесите имат отделна памет, нишките я споделят.
- Пренебрегване на синхронизацията между нишки, което води до race conditions.
- Липса на обработка на deadlock ситуации при използване на множество ресурси.
- Недостатъчно разбиране на контекстната смяна и нейната цена за производителността.
- Използване на неподходящи IPC механизми за конкретния случай (напр. използване на споделена памет, когато съобщения са по-подходящи).

## 7. Short Retrieval Quiz

1. Каква е основната роля на операционната система?
2. Каква е разликата между процес и нишка?
3. Какво е контекстна смяна и защо е необходима?
4. Назовете два метода за междупроцесна комуникация.
5. Какво представлява deadlock?
6. Какви са предимствата на многонитовото програмиране?
7. Как операционната система избира кой процес да изпълнява?

## 8. Quick Recap

- Операционната система управлява хардуера и осигурява среда за изпълнение на програми.
- Процесът е работеща програма със собствено адресно пространство.
- Нишките са леки единици на изпълнение в рамките на процеса и споделят паметта му.
- Планирането на процеси определя кой и кога използва процесора.
- Контекстната смяна позволява многозадачност, но има цена за производителността.
- Междупроцесната комуникация е необходима за координация между процеси.
- Deadlock е критична ситуация, която трябва да се избягва чрез добър дизайн.

## 9. Spaced Review Plan

| Review Time | Prompt                                              |
|-------------|-----------------------------------------------------|
| 1 day       | Обяснете разликата между процес и нишка с пример.   |
| 3 days      | Опишете как ОС управлява процесите и ресурсите.     |
| 1 week      | Дайте пример за deadlock и как може да се избегне.  |
| 1 month     | Избройте основните функции на ОС и ги илюстрирайте. |