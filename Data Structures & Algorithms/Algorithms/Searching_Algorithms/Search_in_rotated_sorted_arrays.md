# Search_in_rotated_sorted_arrays

## 1. Activate Prior Knowledge

- Какво представлява сортиран масив и какви алгоритми за търсене познаваш в него?
- Какво би се случило с класическото бинарно търсене, ако масивът е "завъртян" около някакъв индекс?
- В какви ситуации в софтуерното инженерство или AI системите може да се наложи търсене в завъртян сортиран масив?

## 2. Overview

Търсенето в завъртян сортиран масив е класическа задача, която разширява идеята за бинарно търсене върху масиви, които са били сортирани, но след това "завъртяни" около някаква точка. Това означава, че масивът е разбит на две части, всяка от които е сортирана, но общият масив не е в пълна сортирана последователност. 

Тази задача е особено важна в системи, където данните са циклично променяни или когато се използват структури, които поддържат бърз достъп и модификация, като например ротационни буфери. В AI системи, подобни техники могат да се използват за оптимизиране на търсене в предварително обработени или индексирани данни.

Разбирането на алгоритмите за търсене в завъртян сортиран масив помага да се постигне ефективност от O(log n), което е критично за големи обеми от данни и реално време.

## 3. Key Concepts

- **Rotated Sorted Array** – Масив, който е сортиран, но след това е "завъртян" около някакъв индекс, така че част от масива е преместена в началото. Представете си часовник, който е завъртян с няколко часа.
- **Binary Search** – Ефективен алгоритъм за търсене в сортиран масив, който използва разделяне на интервала на половини, за да намери елемент за O(log n) време.
- **Pivot Point** – Индексът, около който масивът е завъртян. Той разделя масива на две сортирани части.
- **Search Space Reduction** – Стратегия за намаляване на интервала, в който търсим, използвайки свойствата на сортирания и завъртян масив.
- **Edge Cases** – Специални случаи като масив без завъртане, масив с дублиращи се елементи или много малък масив, които изискват допълнително внимание.

## 4. Step-by-step Learning Path

1. **Разбери класическото бинарно търсене**
   - Фокус: Прегледай и имплементирай бинарно търсене в сортиран масив.
   - Задача: Напиши функция за бинарно търсене и тествай с различни масиви.
   - Въпроси: Какво е времевата сложност на бинарното търсене? Защо работи само със сортирани масиви?

2. **Изучи структурата на завъртян сортиран масив**
   - Фокус: Разбери как изглежда завъртян масив и как да намериш pivot point.
   - Задача: Напиши функция, която намира индекса на pivot point.
   - Въпроси: Какво е pivot point? Как може да се използва за търсене?

3. **Комбинирай бинарното търсене с pivot point логика**
   - Фокус: Имплементирай търсене, което използва pivot point, за да избере правилната част на масива.
   - Задача: Напиши функция, която търси елемент в завъртян сортиран масив.
   - Въпроси: Как се избира коя половина да се търси? Какво се случва, ако елементът не е в масива?

4. **Обработи специални случаи**
   - Фокус: Разгледай дублиращи се елементи и празни масиви.
   - Задача: Модифицирай функцията, за да работи правилно с дублирани стойности.
   - Въпроси: Как дубликатите влияят на алгоритъма? Какво трябва да се промени?

5. **Оптимизирай и анализирай алгоритъма**
   - Фокус: Анализирай времевата и пространствената сложност.
   - Задача: Напиши кратък доклад с анализ и възможни оптимизации.
   - Въпроси: Каква е сложността? Може ли да се подобри?

## 5. Examples

### Пример 1: Търсене в малък завъртян масив

```python
def search_rotated(nums, target):
    left, right = 0, len(nums) - 1
    while left <= right:
        mid = (left + right) // 2
        if nums[mid] == target:
            return mid
        if nums[left] <= nums[mid]:  # Лявата половина е сортирана
            if nums[left] <= target < nums[mid]:
                right = mid - 1
            else:
                left = mid + 1
        else:  # Дясната половина е сортирана
            if nums[mid] < target <= nums[right]:
                left = mid + 1
            else:
                right = mid - 1
    return -1

arr = [4,5,6,7,0,1,2]
print(search_rotated(arr, 0))  # Изход: 4
```

### Пример 2: Намиране на pivot point

```python
def find_pivot(nums):
    left, right = 0, len(nums) - 1
    while left < right:
        mid = (left + right) // 2
        if nums[mid] > nums[right]:
            left = mid + 1
        else:
            right = mid
    return left

arr = [4,5,6,7,0,1,2]
print(find_pivot(arr))  # Изход: 4
```

## 6. Common Pitfalls

- **Игнориране на дублиращи се елементи** – Това може да наруши логиката на бинарното търсене и да доведе до безкрайни цикли.
- **Неправилно определяне на сортираната половина** – Ако не се провери правилно коя част е сортирана, алгоритъмът може да пропусне търсения елемент.
- **Забравяне на гранични условия** – Например, когато масивът не е завъртян или е празен.
- **Опит за линейно търсене при големи масиви** – Това губи предимството на O(log n) сложността.
- **Неправилно обновяване на индекси** – Грешки при преместване на `left` и `right` могат да доведат до пропускане на елементи или безкрайни цикли.

## 7. Short Retrieval Quiz

1. Какво представлява завъртян сортиран масив?
2. Какво е pivot point и как се намира?
3. Защо класическото бинарно търсене не работи директно върху завъртян масив?
4. Как се определя коя половина на масива е сортирана?
5. Какво е времевата сложност на търсенето в завъртян сортиран масив?
6. Как дубликатите влияят на алгоритъма?
7. Какво трябва да направим, ако елементът не съществува в масива?

## 8. Quick Recap

- Завъртян сортиран масив е сортиран масив, който е циклично преместван.
- Търсенето използва модифицирана бинарна стратегия, която определя коя половина е сортирана.
- Pivot point разделя масива на две сортирани части и може да се намери с бинарно търсене.
- Алгоритъмът постига O(log n) времева сложност, което е ефективно за големи масиви.
- Дубликатите и граничните случаи изискват специална обработка.
- Правилното обновяване на индекси и проверка на условията е ключово за коректност.
- Този метод е приложим в много системи, които работят с циклично структурирани данни.

## 9. Spaced Review Plan

| Време след първоначално учене | Промпт за преговор                                      |
|-------------------------------|--------------------------------------------------------|
| 1 ден                         | Обяснете как работи търсенето в завъртян сортиран масив. |
| 3 дни                         | Напишете функция за намиране на pivot point.           |
| 1 седмица                     | Опишете как се избира коя половина да се търси.        |
| 1 месец                      | Прегледайте и коригирайте код за търсене с дубликати.  |