# 04 - Interface design and abstraction boundaries

## 1. Activate Prior Knowledge

- Какво означава "интерфейс" в контекста на софтуерното инженерство или изкуствения интелект?
- Можете ли да си спомните случай, когато промяна в една част на система е довела до неочаквани проблеми в друга част?
- Как мислите, че добре дефинираните граници на абстракция помагат при работата в големи екипи или мащабни проекти?

## 2. Overview

Interface design and abstraction boundaries са фундаментални принципи в проектирането на сложни софтуерни системи, включително системи за изкуствен интелект. Интерфейсите определят как различните компоненти на една система комуникират помежду си, докато границите на абстракция определят каква информация се скрива или излага между тези компоненти.

Тези концепции позволяват на екипите да разделят сложни проблеми на по-малки, управляеми части, които могат да се разработват, тестват и поддържат независимо. Добре дефинираните интерфейси и граници на абстракция намаляват зависимостите, улесняват повторната употреба на код и правят системата по-устойчива на промени.

В контекста на AI системите, където често се комбинират различни модели, алгоритми и инфраструктура, ясните интерфейси са критични за интеграция, мащабируемост и надеждност. Те също така подпомагат сътрудничеството между специалисти с различни експертизи.

## 3. Key Concepts

- Interface (интерфейс) – Договор или набор от правила, които определят как един компонент комуникира с друг. Може да се сравни с контактите на електрически уред – важно е само какво влиза и излиза, не какво има вътре.
- Abstraction boundary (граница на абстракция) – Ясна линия, която отделя вътрешната реализация на един компонент от външния свят. Мислете за това като за стена, която скрива сложността и позволява промени без да се нарушава външната комуникация.
- Encapsulation (инкапсулация) – Скриване на вътрешните детайли на един компонент, така че другите да взаимодействат само чрез публичния интерфейс.
- Loose coupling (слабо свързване) – Дизайн, при който компонентите зависят минимално един от друг, което улеснява промени и повторна употреба.
- Contract (договор) – Описание на гаранциите и очакванията между компонентите, често дефинирани чрез интерфейси.

## 4. Step-by-step Learning Path

1. **Understand the role of interfaces**
   - Фокус: Какво представлява интерфейсът и защо е важен.
   - Task: Идентифицирайте интерфейсите в малък проект (например, API между два модула).
   - Retrieval: Какво определя един интерфейс? Какви са ползите от използването на интерфейси?

2. **Explore abstraction boundaries**
   - Фокус: Как се определят граници на абстракция и какво скриват.
   - Task: Начертайте диаграма на система, като отбележите границите на абстракция между компонентите.
   - Retrieval: Какво е граница на абстракция? Защо е важно да се скриват вътрешни детайли?

3. **Design a simple interface**
   - Фокус: Създаване на интерфейс за комуникация между два компонента.
   - Task: Опишете с псевдокод или UML интерфейс за модул за обработка на данни.
   - Retrieval: Какви елементи трябва да съдържа един добър интерфейс? Какво трябва да се избягва?

4. **Refactor for encapsulation and loose coupling**
   - Фокус: Подобряване на съществуващ код чрез по-добра инкапсулация и слабо свързване.
   - Task: Променете примерен код така, че модулите да комуникират само чрез интерфейси.
   - Retrieval: Как инкапсулацията и слабото свързване подобряват поддръжката на системата?

5. **Review and test interface contracts**
   - Фокус: Проверка на спазването на договорите между компонентите.
   - Task: Напишете тестове, които проверяват дали компонентите спазват договорения интерфейс.
   - Retrieval: Какво се случва, ако даден компонент наруши интерфейсния договор? Как се откриват такива грешки?

## 5. Examples

### Example 1: Python интерфейс за класифициране на изображения

```python
class ImageClassifier:
    def predict(self, image):
        """Връща етикет за дадено изображение."""
        pass
```
Този интерфейс позволява различни реализации (напр. с TensorFlow или PyTorch), без да се променя кода, който го използва.

---

### Example 2: Абстракция в слоев модел на AI система

- **Data Loader** (данни) <-> **Model** (модел) <-> **Evaluator** (оценител)
- Всеки слой комуникира само чрез дефинирани методи (интерфейси), без да знае вътрешните детайли на другия.

---

### Example 3: REST API като интерфейс

```http
GET /api/v1/predict?input=...
```
REST API предоставя ясен интерфейс между клиент и сървър, независимо от вътрешната реализация на сървъра.

## 6. Common Pitfalls

- **Липса на ясно дефинирани интерфейси** – Води до неразбираеми зависимости и трудна поддръжка. Използвайте ясни договори.
- **Прекалено излагане на вътрешни детайли** – Нарушава инкапсулацията и увеличава риска от грешки при промени.
- **Твърде тясно свързани компоненти** – Пречи на рефакториране и повторна употреба. Стремете се към слабо свързване.
- **Неактуални или неясни интерфейсни договори** – Води до неочаквани грешки при интеграция. Поддържайте документацията актуална.

## 7. Short Retrieval Quiz

1. Какво е интерфейс в софтуерното инженерство?
2. Какво представлява границата на абстракция?
3. Как инкапсулацията помага за поддръжката на системата?
4. Какво е loose coupling и защо е важно?
5. Дайте пример за интерфейс в AI система.
6. Какви са рисковете при липса на добре дефинирани интерфейси?
7. Какво представлява интерфейсният договор?

## 8. Quick Recap

- Интерфейсите определят как компонентите комуникират помежду си.
- Границите на абстракция скриват вътрешните детайли и защитават от промени.
- Инкапсулацията намалява риска от грешки и улеснява поддръжката.
- Слабото свързване прави системите по-гъвкави и лесни за разширяване.
- Интерфейсните договори гарантират съвместимост между компонентите.
- Ясните интерфейси са критични при мащабни и AI системи.
- Добрата документация и тестване на интерфейсите предотвратяват интеграционни проблеми.

## 9. Spaced Review Plan

| When      | Review Prompt                                               |
|-----------|------------------------------------------------------------|
| 1 day     | Опишете с примери разликата между интерфейс и абстракция.  |
| 3 days    | Начертайте схема на система с ясно отбелязани интерфейси.  |
| 1 week    | Преработете малък проект за по-добра инкапсулация.         |
| 1 month   | Обяснете предимствата на слабото свързване пред колега.    |