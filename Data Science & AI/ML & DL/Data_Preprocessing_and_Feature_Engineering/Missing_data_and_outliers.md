# Missing_data_and_outliers

## 1. Activate Prior Knowledge
- Какво представляват липсващите данни и аутлайърите (екстремни стойности) във вашия опит с данни?
- Как мислите, че липсващите данни и аутлайърите могат да повлияят на резултатите от машинно обучение или софтуерни системи?
- Кои методи за обработка на липсващи данни и аутлайъри сте срещали или използвали досега?

## 2. Overview
Липсващите данни и аутлайърите са често срещани проблеми при работа с реални данни, особено в контекста на изкуствения интелект и софтуерното инженерство. Липсващите данни се появяват, когато определени стойности в набора от данни не са налични поради различни причини – технически грешки, пропуски при събиране или други. Аутлайърите са стойности, които се отклоняват значително от останалите данни и могат да са резултат от грешки или истински, но редки явления.

Обработката на липсващи данни и аутлайъри е критична, защото те могат да изкривят анализа, да намалят точността на модели за машинно обучение и да доведат до неправилни изводи. В системите за изкуствен интелект правилното справяне с тези проблеми подобрява надеждността и стабилността на решенията.

Тази тема се вписва в по-широкия контекст на подготовката и почистването на данни (data preprocessing), което е основен етап в изграждането на всяка интелигентна система. Разбирането и прилагането на техники за работа с липсващи данни и аутлайъри е задължително за всеки професионалист, който иска да създава качествени и устойчиви модели.

## 3. Key Concepts
- **Missing Data (Липсващи данни)** – Отсъстващи стойности в набора от данни, които могат да бъдат случайни или систематични. Представете си, че имате таблица с информация за пациенти, но някои от тях не са попълнили възрастта си.
- **Outliers (Аутлайъри)** – Стойности, които са значително по-различни от останалите в набора. Те са като "черни овце" в стадото, които могат да са грешки или важни сигнали.
- **Imputation (Импутация)** – Процесът на заместване на липсващи данни с подходящи стойности, например средна стойност или предсказани данни.
- **Robustness (Робустност)** – Способността на модел или алгоритъм да работи добре въпреки наличието на аутлайъри или липсващи данни.
- **Data Cleaning (Почистване на данни)** – Цялостният процес на идентифициране и коригиране на грешки, липсващи стойности и аутлайъри преди анализа.
- **Missing Completely at Random (MCAR)** – Липсващите данни са напълно случайни и не зависят от други променливи.
- **Missing at Random (MAR)** – Липсващите данни зависят от наблюдаваните променливи, но не и от липсващите.
- **Missing Not at Random (MNAR)** – Липсващите данни зависят от самите липсващи стойности.

## 4. Step-by-step Learning Path
1. **Разберете типовете липсващи данни**
   - Фокус: MCAR, MAR, MNAR и как влияят на анализа.
   - Задача: Анализирайте малък набор от данни с липсващи стойности и определете типа им.
   - Въпроси: Какви са разликите между MCAR и MAR? Защо MNAR е най-труден за обработка?

2. **Изучете техники за импутация**
   - Фокус: Средна стойност, медиана, модалност, регресионна импутация.
   - Задача: Имплементирайте импутация с медиана върху реален набор от данни.
   - Въпроси: Кога е по-добре да използваме медиана вместо средна стойност? Какво е предимството на регресионната импутация?

3. **Идентифицирайте аутлайъри**
   - Фокус: Методи като Z-score, IQR, визуализации (boxplot).
   - Задача: Използвайте Python и matplotlib, за да визуализирате аутлайъри в набор от данни.
   - Въпроси: Какво представлява IQR и как се използва за откриване на аутлайъри? Какво е Z-score?

4. **Обработете аутлайъри**
   - Фокус: Премахване, трансформация, robust модели.
   - Задача: Приложете премахване на аутлайъри и сравнете резултатите на модел за регресия.
   - Въпроси: Кога е по-добре да трансформираме аутлайърите вместо да ги премахваме? Какво е robust regression?

5. **Практикувайте интегрирана обработка**
   - Фокус: Комбиниране на импутация и обработка на аутлайъри в pipeline.
   - Задача: Създайте pipeline с sklearn, който автоматично обработва липсващи данни и аутлайъри.
   - Въпроси: Как pipeline подобрява повторяемостта? Какви са предимствата на автоматизираната обработка?

## 5. Examples
### Пример 1: Импутация с медиана в Python
```python
import pandas as pd
from sklearn.impute import SimpleImputer

data = {'Age': [25, 30, None, 22, None, 28]}
df = pd.DataFrame(data)

imputer = SimpleImputer(strategy='median')
df['Age'] = imputer.fit_transform(df[['Age']])

print(df)
```

### Пример 2: Откриване на аутлайъри с IQR
```python
import numpy as np

data = np.array([10, 12, 12, 13, 12, 100, 12, 11, 13])
Q1 = np.percentile(data, 25)
Q3 = np.percentile(data, 75)
IQR = Q3 - Q1

outliers = data[(data < Q1 - 1.5 * IQR) | (data > Q3 + 1.5 * IQR)]
print("Outliers:", outliers)
```

### Пример 3: Pipeline за обработка на липсващи данни и аутлайъри
```python
from sklearn.pipeline import Pipeline
from sklearn.impute import SimpleImputer
from sklearn.preprocessing import RobustScaler
from sklearn.linear_model import LinearRegression

pipeline = Pipeline([
    ('imputer', SimpleImputer(strategy='median')),
    ('scaler', RobustScaler()),
    ('model', LinearRegression())
])
```

## 6. Common Pitfalls
- Игнориране на причината за липсващите данни и прилагане на неподходящ метод за импутация.
- Премахване на аутлайъри без анализ дали са грешки или важни данни.
- Използване на средна стойност при силно изкривени данни, което води до изкривяване на резултатите.
- Пропускане на визуализацията на данните преди обработка.
- Липса на повторяемост и автоматизация при обработката на данни.

## 7. Short Retrieval Quiz
1. Какво е разликата между MCAR и MAR?
2. Коя техника за импутация е по-устойчива на аутлайъри – средна стойност или медиана?
3. Какво представлява IQR и как се използва за откриване на аутлайъри?
4. Защо е важно да се обработват липсващи данни преди обучение на модел?
5. Какво е robust regression и кога се използва?
6. Какво може да се случи, ако премахнем всички аутлайъри без анализ?
7. Кои са основните компоненти на pipeline за обработка на липсващи данни и аутлайъри?

## 8. Quick Recap
- Липсващите данни и аутлайърите са чести проблеми в реалните набори от данни.
- Различните типове липсващи данни изискват различни подходи за обработка.
- Импутацията замества липсващи стойности с подходящи заместители като медиана или регресионни предсказания.
- Аутлайърите могат да бъдат открити чрез статистически методи като IQR и Z-score.
- Обработката на аутлайъри включва премахване, трансформация или използване на робустни модели.
- Автоматизираните pipeline-и повишават ефективността и повторяемостта на анализа.
- Внимателният анализ и визуализация са ключови за успешна работа с липсващи данни и аутлайъри.

## 9. Spaced Review Plan

| Време след учене | Промпт за преглед                                      |
|------------------|-------------------------------------------------------|
| 1 ден            | Какви са основните типове липсващи данни и примери?   |
| 3 дни            | Опишете методите за откриване и обработка на аутлайъри. |
| 1 седмица        | Как се създава pipeline за обработка на липсващи данни и аутлайъри? |
| 1 месец          | Прегледайте типичните грешки при работа с липсващи данни и аутлайъри и как да ги избегнете. |