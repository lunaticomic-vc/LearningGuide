# Randomized_algorithms

## 1. Activate Prior Knowledge

- Какво е вероятност и как тя може да влияе на поведението на софтуерни системи?
- Срещали ли сте алгоритми, които използват случайни числа, и как мислите, че това може да подобри тяхната ефективност или простота?
- Какви предимства и рискове виждате при използването на случайност в алгоритми, особено в контекста на изкуствен интелект или софтуерно инженерство?

## 2. Overview

Случайните алгоритми са алгоритми, които използват случайни числа или случайни решения като част от своята логика. Те се различават от детерминираните алгоритми, които винаги следват една и съща последователност от стъпки при едни и същи входни данни. Основната цел на случайните алгоритми е да подобрят ефективността, простотата или надеждността на решението на даден проблем.

В контекста на изкуствения интелект и софтуерното инженерство, случайните алгоритми често се използват за оптимизация, приближени решения и обработка на големи данни, където детерминираните методи са твърде бавни или сложни. Те могат да предложат баланс между точност и време за изпълнение, като позволяват контролирана вероятност за грешка.

Тези алгоритми са особено важни, когато проблемите са NP-трудни или когато се работи с непълна информация. Те също така могат да бъдат използвани за генериране на тестови случаи, криптография и симулации, където случайността е ключов компонент.

## 3. Key Concepts

- **Randomized Algorithm** – алгоритъм, който използва случайни числа или случайни решения като част от своя процес. Може да се разглежда като "алгоритъм с късмет", който понякога избира различни пътища за решаване на проблема.
- **Monte Carlo Algorithm** – тип случайни алгоритми, които винаги завършват, но резултатът им е вероятностно приближение с контролирана грешка. Представете си хвърляне на монета много пъти, за да оцените вероятност.
- **Las Vegas Algorithm** – случайни алгоритми, които винаги дават правилен резултат, но времето за изпълнение е случайно. Може да си представите игра, която продължава докато не спечелите.
- **Probabilistic Analysis** – анализ на алгоритми, който използва вероятностни модели, за да предскаже средното или очакваното поведение, вместо най-лошия случай.
- **Random Seed** – начална стойност за генератор на случайни числа, която определя последователността на генерираните числа. Позволява възпроизводимост на резултатите.
- **Expected Runtime** – средното време за изпълнение на алгоритъма, взето като очакване по всички възможни случайни избори.
- **Derandomization** – техника за премахване на случайността от алгоритъм, като се използват детерминирани методи, запазвайки добрите свойства на случайния алгоритъм.

## 4. Step-by-step Learning Path

1. **Запознайте се с основите на вероятността и случайността**
   - Фокус: Основни понятия като вероятност, случайна променлива, разпределения.
   - Задача: Напишете програма, която симулира хвърляне на зар 1000 пъти и изчислява честотата на всяко число.
   - Въпроси: Какво е вероятността да се падне число 6? Какво е средното очаквано число при хвърляне на зар?

2. **Разберете разликата между детерминирани и случайни алгоритми**
   - Фокус: Примери за двата типа алгоритми и техните предимства/недостатъци.
   - Задача: Имплементирайте прост детерминиран сортиращ алгоритъм и после рандомизиран вариант на QuickSort.
   - Въпроси: Как случайността влияе на времето за изпълнение на QuickSort? Защо рандомизацията може да подобри средното време?

3. **Изучете класовете случайни алгоритми: Monte Carlo и Las Vegas**
   - Фокус: Разликите в гаранциите за коректност и време.
   - Задача: Имплементирайте Monte Carlo алгоритъм за проверка на простота на число (например тест на Милер-Рабин).
   - Въпроси: Каква е вероятността за грешка? Какво се случва, ако увеличим броя на итерациите?

4. **Практикувайте анализ на очакваното време и вероятност за грешка**
   - Фокус: Изчисляване на очаквано време и вероятност за грешка в конкретни алгоритми.
   - Задача: Анализирайте времето за изпълнение на рандомизиран алгоритъм за намиране на медиана.
   - Въпроси: Какво е очакваното време? Как случайността влияе на най-лошия случай?

5. **Изследвайте техники за дерaндомизация**
   - Фокус: Методи за премахване на случайността, когато е необходимо.
   - Задача: Проучете и имплементирайте пример за дерaндомизация на рандомизиран алгоритъм.
   - Въпроси: Какви са предимствата и недостатъците на дерaндомизацията?

## 5. Examples

### Пример 1: Рандомизиран QuickSort (Python)

```python
import random

def randomized_quicksort(arr):
    if len(arr) <= 1:
        return arr
    pivot_index = random.randint(0, len(arr) - 1)
    pivot = arr[pivot_index]
    less = [x for i, x in enumerate(arr) if x < pivot or (x == pivot and i != pivot_index)]
    equal = [x for x in arr if x == pivot]
    greater = [x for x in arr if x > pivot]
    return randomized_quicksort(less) + equal + randomized_quicksort(greater)

data = [5, 3, 8, 4, 2, 7, 1, 10]
print(randomized_quicksort(data))
```

### Пример 2: Тест на простота Милер-Рабин (Monte Carlo)

```python
import random

def miller_rabin(n, k=5):
    if n < 2:
        return False
    # Намери d и r, такива че n-1 = d*2^r
    r, d = 0, n - 1
    while d % 2 == 0:
        d //= 2
        r += 1
    for _ in range(k):
        a = random.randint(2, n - 2)
        x = pow(a, d, n)
        if x == 1 or x == n - 1:
            continue
        for _ in range(r - 1):
            x = pow(x, 2, n)
            if x == n - 1:
                break
        else:
            return False
    return True

print(miller_rabin(97))  # True
print(miller_rabin(100)) # False
```

### Пример 3: Лас Вегас алгоритъм за намиране на медиана (Randomized Select)

```python
import random

def randomized_select(arr, k):
    if len(arr) == 1:
        return arr[0]
    pivot = random.choice(arr)
    lows = [el for el in arr if el < pivot]
    highs = [el for el in arr if el > pivot]
    pivots = [el for el in arr if el == pivot]

    if k <= len(lows):
        return randomized_select(lows, k)
    elif k <= len(lows) + len(pivots):
        return pivot
    else:
        return randomized_select(highs, k - len(lows) - len(pivots))

data = [7, 10, 4, 3, 20, 15]
print(randomized_select(data, 3))  # Третият най-малък елемент
```

## 6. Common Pitfalls

- **Неправилно използване на генератор на случайни числа** – използването на неподходящ или неподновен seed може да доведе до предсказуемост и липса на истинска случайност.
- **Подценяване на вероятността за грешка** – не всички случайни алгоритми гарантират 100% правилен резултат; важно е да се разбере и контролира тази вероятност.
- **Игнориране на най-лошия случай** – някои рандомизирани алгоритми имат лоши най-лоши случаи, които могат да се случат рядко, но са критични за системи с високи изисквания.
- **Липса на възпроизводимост** – без фиксиране на random seed, резултатите могат да са различни при всяко изпълнение, което затруднява дебъгване и тестване.
- **Прекомерна рандомизация** – използването на случайност там, където детерминирани методи са по-ефективни или по-надеждни, може да усложни системата без реална полза.

## 7. Short Retrieval Quiz

1. Каква е основната разлика между Monte Carlo и Las Vegas алгоритмите?
2. Какво означава "expected runtime" при случайните алгоритми?
3. Защо рандомизацията може да подобри производителността на QuickSort?
4. Какво е ролята на random seed в случайните алгоритми?
5. Какво представлява дерaндомизацията?
6. Какви са рисковете при използване на случайни алгоритми в критични системи?
7. Как се оценява вероятността за грешка при Monte Carlo алгоритмите?

## 8. Quick Recap

- Случайните алгоритми използват случайност, за да подобрят ефективността или простотата на решенията.
- Monte Carlo алгоритмите дават приближени резултати с контролирана вероятност за грешка.
- Las Vegas алгоритмите винаги дават правилен резултат, но времето им за изпълнение е случайно.
- Рандомизацията може да подобри средното време за изпълнение и да избегне най-лошите случаи.
- Важно е да се управлява и разбира вероятността за грешка и очакваното време.
- Дерaндомизацията позволява премахване на случайността, запазвайки предимствата на рандомизираните алгоритми.
- Практическото използване изисква внимание към генераторите на случайни числа и възпроизводимостта.

## 9. Spaced Review Plan

| Време след учене | Промпт за преглед                                      |
|------------------|-------------------------------------------------------|
| 1 ден            | Обяснете разликата между Monte Carlo и Las Vegas алгоритми. |
| 3 дни            | Имплементирайте прост рандомизиран алгоритъм и анализирайте времето му. |
| 1 седмица        | Опишете как рандомизацията подобрява QuickSort и други алгоритми. |
| 1 месец          | Прегледайте общите рискове и техники за дерaндомизация. |