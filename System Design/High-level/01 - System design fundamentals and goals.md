# 01 - System design fundamentals and goals

## 1. Activate Prior Knowledge

- Как бихте описали разликата между „софтуерна архитектура“ и „системен дизайн“?  
- Кои са основните цели, които трябва да изпълнява една добре проектирана система (например за AI, уеб приложения или бази данни)?  
- Можете ли да си спомните случай, когато дадена система се е провалила поради лош дизайн? Какви бяха последствията?

---

## 2. Overview

Системният дизайн е дисциплина, която се занимава с планирането и структурирането на сложни софтуерни системи така, че те да бъдат надеждни, мащабируеми и лесни за поддръжка. Той обхваща избора на архитектурни модели, компоненти, интерфейси и технологии, които заедно осигуряват постигането на бизнес и технически цели.

В контекста на съвременните AI системи или големи уеб приложения, системният дизайн е ключов за справяне с предизвикателства като обработка на огромни обеми данни, висока достъпност, сигурност и ефективност. Добре проектираната система позволява лесно надграждане, интеграция на нови функции и минимизиране на риска от сривове.

Системният дизайн е мост между бизнес изискванията и техническата реализация. Той гарантира, че системата не само работи, но и отговаря на очакванията за производителност, надеждност и разходи.

---

## 3. Key Concepts

- System – Съвкупност от взаимосвързани компоненти, които работят заедно за постигане на определена цел. Може да се мисли като „екип“, където всеки член има своя роля.
- Requirements – Ясно дефинирани нужди и ограничения, които системата трябва да изпълнява. Аналогия: „списък с желания“ на клиента.
- Scalability – Способността на системата да се справя с увеличаващ се обем на работа без загуба на производителност. Представете си ресторант, който може да обслужва 10 или 1000 клиента еднакво добре.
- Reliability – Вероятността системата да работи коректно за определен период от време. Подобно на автомобил, който не се чупи често.
- Maintainability – Леснотата, с която системата може да се променя или поправя. Като модулен шкаф, където лесно сменяте чекмедже.
- Availability – Процентът време, в което системата е достъпна за потребителите. Пример: 99.99% uptime за облачна услуга.
- Latency – Времето, необходимо за обработка на заявка от началото до края. Като времето за доставка на пица след поръчка.
- Throughput – Броят операции, които системата може да обработи за единица време. Например, колко пици може да направи пицарията за час.

---

## 4. Step-by-step Learning Path

1. **Разберете бизнес изискванията**
   - Фокус: Какви са целите и ограниченията на системата?
   - Практическа задача: Направете списък с 5 ключови изисквания за въображаема AI система.
   - Въпроси: Какво ще стане, ако пропуснете важно изискване? Как изискванията влияят на дизайна?

2. **Идентифицирайте основните компоненти**
   - Фокус: Какви модули/сервизи ще изграждат системата?
   - Практическа задача: Начертайте блок-схема на основните компоненти за избраната система.
   - Въпроси: Как компонентите комуникират? Кой компонент е критичен?

3. **Оценете нефункционалните изисквания**
   - Фокус: Надеждност, мащабируемост, сигурност и др.
   - Практическа задача: Изберете един нефункционален аспект и опишете как ще го гарантирате.
   - Въпроси: Какво означава „99.9% uptime“? Как се измерва latency?

4. **Изберете архитектурен стил**
   - Фокус: Монолит, микросервизи, събитийно-ориентирана архитектура и др.
   - Практическа задача: Обосновете избора на архитектура за вашата система.
   - Въпроси: Какви са плюсовете и минусите на микросервизите? Кога е подходящ монолит?

5. **Планирайте за бъдещо разширение и поддръжка**
   - Фокус: Как системата ще се развива и поддържа във времето?
   - Практическа задача: Опишете сценарий за надграждане на системата без прекъсване на услугата.
   - Въпроси: Какви са рисковете при лоша поддръжка? Какво означава maintainability?

---

## 5. Examples

### Пример 1: Дизайн на система за препоръки (AI)

- Изисквания: Бързи препоръки, обработка на милиони потребители, висока наличност.
- Компоненти: Data ingestion, модел за препоръки, API за препоръки, база данни.
- Архитектура: Микросервизи, кеширане на резултати, load balancer.

```python
# Примерен псевдокод за препоръка
def get_recommendations(user_id):
    if cache.exists(user_id):
        return cache.get(user_id)
    recommendations = model.predict(user_id)
    cache.set(user_id, recommendations)
    return recommendations
```

### Пример 2: Уеб приложение за резервации

- Изисквания: Висока надеждност, обработка на плащания, лесно добавяне на нови функции.
- Компоненти: Frontend, backend, payment service, notification service.
- Архитектура: Микросервизи с REST API, централизирана база данни.

### Пример 3: Система за мониторинг на IoT устройства

- Изисквания: Обработка на голям брой събития в реално време, ниска латентност.
- Компоненти: Event collector, обработващ сървър, база данни, dashboard.
- Архитектура: Събитийно-ориентирана архитектура с message queue.

---

## 6. Common Pitfalls

- Пренебрегване на нефункционалните изисквания (напр. сигурност, мащабируемост) – Винаги ги уточнявайте рано.
- Недостатъчно планиране за бъдещи промени – Използвайте модулност и стандартизирани интерфейси.
- Прекалено сложна архитектура за малки проекти – Изберете най-простото решение, което работи.
- Липса на документация – Води до трудности при поддръжка и развитие.
- Пропускане на тестове за натоварване и отказоустойчивост – Редовно симулирайте реални условия.

---

## 7. Short Retrieval Quiz

1. Какво означава „scalability“ в системния дизайн?
2. Кои са основните разлики между монолитна и микросервизна архитектура?
3. Какво представлява latency и защо е важна?
4. Какво е нефункционално изискване? Дайте пример.
5. Защо е важно да документирате архитектурните решения?
6. Какво означава „availability“ и как се измерва?
7. Какви са рисковете при лоша maintainability?

---

## 8. Quick Recap

- Системният дизайн структурира сложни софтуерни системи за постигане на бизнес и технически цели.
- Основните концепции включват scalability, reliability, maintainability, latency и throughput.
- Процесът започва с изясняване на изискванията и избор на подходяща архитектура.
- Нефункционалните изисквания са също толкова важни, колкото и функционалните.
- Простотата често е по-добра от сложността.
- Документацията и планирането за бъдеще са критични за успеха.
- Реалните задачи и тестове помагат да се избегнат често срещани грешки.

---

## 9. Spaced Review Plan

| Review Time | Prompt                                              |
|-------------|-----------------------------------------------------|
| 1 day       | Избройте основните цели на системния дизайн.        |
| 3 days      | Обяснете разликата между reliability и availability.|
| 1 week      | Начертайте схема на проста система и обосновете избора на архитектура. |
| 1 month     | Дайте пример за провал на система поради лош дизайн и как бихте го избегнали. |