# Filesystems_and_storage

## 1. Activate Prior Knowledge
- Какво представлява файловата система и каква е ролята ѝ в операционната система?
- Как съхраняват и организират данните съвременните компютърни системи, особено в контекста на големи AI модели и софтуерни приложения?
- Какви предизвикателства могат да възникнат при управлението на големи обеми данни и как файловите системи помагат за тяхното решаване?

## 2. Overview
Файловите системи са основният механизъм, чрез който операционните системи организират, съхраняват и управляват данни на физически носители като твърди дискове, SSD-та и мрежови устройства. Те предоставят логическа структура, която позволява на потребителите и приложенията да съхраняват и достъпват файлове по ефективен и надежден начин.

В контекста на софтуерното инженерство и AI системите, правилният избор и конфигурация на файловата система е критичен за производителността, надеждността и мащабируемостта на приложенията. Например, при обработка на големи набори от данни или модели, файловите системи трябва да поддържат бърз достъп, паралелна работа и защита срещу загуба на данни.

Файловите системи са част от по-широката екосистема за съхранение, която включва хардуерни устройства, драйвери, кеширане и мрежови протоколи. Разбирането на тяхната архитектура и принципи на работа е фундаментално за всеки професионалист, който иска да оптимизира системи за съхранение и обработка на информация.

## 3. Key Concepts
- **File** – логическа единица за съхранение на данни, която съдържа информация, достъпна чрез файловата система. Можем да си го представим като дигитален контейнер.
- **Filesystem (Файлова система)** – структура и набор от правила, които определят как файловете се съхраняват, именуват и достъпват на физически носител.
- **Inode** – метаданни за файл, съдържащи информация като размер, права за достъп и местоположение на данните на диска. Аналогично на "карта" към съдържанието на файла.
- **Block (Блок)** – минималната единица за съхранение на данни на диска, подобно на страница в книга.
- **Mounting (Монтиране)** – процесът, чрез който операционната система свързва файловата система с определена точка в дървото на директориите.
- **Journaling (Журнализация)** – техника за защита на файловата система от повреди, като записва промените в специален журнал преди да ги приложи.
- **SSD vs HDD** – два основни типа физически носители, където SSD-тата са по-бързи и по-надеждни, но с различни особености при управление на файловите системи.
- **RAID (Redundant Array of Independent Disks)** – техника за комбиниране на няколко диска за повишена производителност и надеждност.

## 4. Step-by-step Learning Path
1. **Разбиране на основните структури на файловата система**
   - Фокус: Inode, блокове, директории.
   - Практическа задача: Изследвайте структурата на файловата система на Linux с командата `ls -li` и `stat`.
   - Въпроси: Какво представлява inode? Как се свързва inode с файла?

2. **Изучаване на различни типове файлови системи**
   - Фокус: ext4, NTFS, FAT32, ZFS.
   - Практическа задача: Монтирайте и разгледайте файлове на USB устройство с различна файлова система.
   - Въпроси: Какви са предимствата на ext4 пред FAT32? Защо ZFS е предпочитан за големи системи?

3. **Журнализация и защита на данните**
   - Фокус: Как работи журнализацията и защо е важна.
   - Практическа задача: Създайте файл, прекъснете захранването и анализирайте състоянието на файловата система.
   - Въпроси: Какво е журнал и как помага при възстановяване?

4. **Оптимизация и производителност**
   - Фокус: Кеширане, блокови размери, SSD специфика.
   - Практическа задача: Измерете времето за четене/запис с различни размери на блокове.
   - Въпроси: Как размерът на блока влияе на производителността? Как SSD променя подхода към файловите системи?

5. **Мрежови файлови системи и разпределено съхранение**
   - Фокус: NFS, SMB, и разпределени файлови системи.
   - Практическа задача: Свържете се към отдалечен споделен ресурс и копирайте файлове.
   - Въпроси: Какви са предизвикателствата при мрежовите файлови системи? Как се осигурява консистентност?

## 5. Examples
- **Пример 1: Извличане на информация за файл с `stat`**
  ```bash
  stat example.txt
  ```
  Изходът показва inode номер, размер, права и време на последна промяна.

- **Пример 2: Монтиране на USB устройство с ext4**
  ```bash
  sudo mount /dev/sdb1 /mnt/usb
  ls /mnt/usb
  ```
  Това позволява достъп до файловете на USB устройството.

- **Пример 3: Създаване на файл и проверка на журнализацията**
  ```bash
  echo "Test data" > /mnt/usb/testfile.txt
  sync
  sudo umount /mnt/usb
  ```
  След рестарт на системата, данните остават непокътнати благодарение на журнализацията.

## 6. Common Pitfalls
- **Игнориране на правилния избор на файлова система** – различните файлови системи са оптимизирани за различни задачи; неправилният избор води до загуба на производителност и надеждност.
- **Прекомерно фрагментиране** – при дългосрочна употреба без дефрагментация, файловете се разпокъсват, което забавя достъпа.
- **Неправилно монтиране** – опит за достъп до файлове без правилно монтиране води до грешки и загуба на данни.
- **Недостатъчно внимание към права и сигурност** – неправилно зададени права могат да компрометират системата.
- **Пренебрегване на backup и RAID решения** – липсата на резервни копия и RAID може да доведе до загуба на критични данни.

## 7. Short Retrieval Quiz
1. Какво представлява inode и каква информация съдържа?
2. Каква е разликата между SSD и HDD от гледна точка на файловите системи?
3. Какво е журнализация и защо е важна?
4. Коя команда в Linux показва подробна информация за файл?
5. Какво означава "монтиране" на файловата система?
6. Как RAID подобрява надеждността на съхранението?
7. Какъв е ефектът от размера на блока върху производителността?

## 8. Quick Recap
- Файловите системи организират и управляват съхранението на данни върху физически носители.
- Inode съдържа метаданни за файловете и е ключов елемент в много файлови системи.
- Журнализацията предпазва от загуба на данни при внезапни прекъсвания.
- Изборът на файлова система влияе върху производителността и надеждността.
- Монтирането свързва файловата система с операционната система за достъп.
- SSD дисковете изискват специфични оптимизации за файловите системи.
- Мрежовите файлови системи позволяват споделяне на данни, но имат свои предизвикателства.

## 9. Spaced Review Plan

| Време след учене | Промпт за преглед                                      |
|------------------|-------------------------------------------------------|
| 1 ден            | Обяснете какво е inode и каква е ролята му.          |
| 3 дни            | Сравнете ext4 и NTFS файлови системи.                 |
| 1 седмица        | Опишете процеса на журнализация и защо е важен.       |
| 1 месец          | Дайте пример за оптимизация на файловата система за SSD. |